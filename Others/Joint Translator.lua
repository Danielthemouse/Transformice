string.split = function(str, pat)
	local out = {}
	for value in str:gmatch(pat) do
		out[#out + 1] = value
	end
	return out
end
math.intersects = function(x1, y1, x2, y2, x3, y3)
	if x1 >= x2 and x1 <= x3 then
		if y1 >= y2 and y1 <= y3 then
			return true
		end
	end
	return false
end
math.minmax = function(a, b)
	if a > b then
		return a, b
	else
		return b, a
	end
end
table.copy = function(list)
	local out = {}
	for k,v in next,list do
		out[k] = v
	end
	return out
end

do
	local _J = {}
	local getID = coroutine.wrap(function()
		local index = 0
		while true do
			coroutine.yield(index)
			index = index + 1
		end
	end)
	local getValue = function(list, index)
		local out = {}
		for i,joint in next,list do
			for attrib,value in next,joint do
				if attrib == index then
					out[#out + 1] = value
				end
			end
		end
		return out
	end
	
	local _DRAWINGS = {
		bomb = '<L><JD P1="0,0" P2="0,1" c="1f1f1f,30,1,1" /><JD P1="-1,-2" P2="-1,-1" c="5c5c5c,24,0.38,1" /><JD P1="1,-17" P2="1,-14" c="1c1b1c,9,1,1" /><JD P1="-4,-10" P2="-6,-8" c="ffffff,7,0.19,1" /><JD P1="-11,-3" P2="-11,-2" c="ffffff,5,0.23,1" /><JD P1="3,-25" P2="1,-20" c="947a62,2,1,1" /><JD P1="-2,-31" P2="6,-24" c="ffd52e,2,0.57,1" /><JD P1="9,-34" P2="4,-27" c="ffd52e,2,0.58,1" /><JD P1="9,-25" P2="-2,-27" c="ffd52e,2,0.58,1" /><JD P1="-3,-32" P2="-1,-30" c="ff9430,2,0.58,1" /><JD P1="11,-39" P2="8,-33" c="ff9430,2,0.58,1" /><JD P1="12,-24" P2="8,-25" c="ff9430,2,0.58,1" /><JD P1="7,-22" P2="5,-24" c="ff9430,2,0.58,1" /><JD P1="-2,-27" P2="-5,-27" c="ff9430,2,0.58,1" /><JD P1="15,-29" P2="11,-28" c="ff9430,2,0.58,1" /><JD P1="1,-37" P2="3,-33" c="ff9430,2,0.58,1" /></L></Z></C>',
		cannon = '<L><JD P1="-1,0" P2="1,0" c="1a2224,30,0.6,1" /><JD P1="0,0" P2="0,1" c="1a2224,30,1,1" /><JD P1="0,0" P2="0,1" c="242424,26,1,1" /><JD P1="3,2" P2="3,3" c="121212,22,1,1" /><JD P1="1,8" P2="1,9" c="3b3b3b,10,1,1" /><JD P1="7,3" P2="8,4" c="3b3b3b,10,1,1" /><JD P1="0,0" P2="0,1" c="121212,24,1,1" /><JD P1="-2,-1" P2="-2,0" c="242424,24,1,1" /><JD P1="-2,-1" P2="0,-3" c="242424,24,1,1" /><JD P1="-2,-3" P2="-2,-2" c="2b2a2b,18,1,1" /><JD P1="-5,-7" P2="-6,-6" c="636363,6,1,1" /><JD P1="-10,-2" P2="-10,-1" c="636363,3,1,1" /><JD P1="-6,1" P2="-4,2" c="999999,3,1,1" /><JD P1="-4,2" P2="-1,1" c="999999,3,1,1" /><JD P1="4,5" P2="4,6" c="999999,2,1,1" /><JD P1="-1,1" P2="6,1" c="999999,3,1,1" /><JD P1="7,1" P2="3,6" c="999999,2,1,1" /><JD P1="7,2" P2="4,5" c="999999,3,1,1" /><JD P1="2,-6" P2="8,1" c="999999,3,1,1" /><JD P1="6,2" P2="2,7" c="999999,3,1,1" /></L></Z></C>',
		cheese = '<L><JD P1="-18,-1" P2="-2,-10" c="fed69a,7,1,1" /><JD P1="-2,-10" P2="7,-8" c="fed69a,7,1,1" /><JD P1="7,-8" P2="16,-2" c="fed69a,7,1,1" /><JD P1="-20,0" P2="10,-2" c="fed69a,8,1,1" /><JD P1="-24,0" P2="-5,2" c="e3b55a,2,1,1" /><JD P1="-8,2" P2="4,2" c="e3b55a,2,1,1" /><JD P1="4,2" P2="11,1" c="e3b55a,2,1,1" /><JD P1="11,1" P2="19,-2" c="e3b55a,2,1,1" /><JD P1="-22,1" P2="-19,7" c="e3b55a,4,1,1" /><JD P1="-19,9" P2="16,9" c="e3b55a,4,1,1" /><JD P1="16,8" P2="17,0" c="e3b55a,5,1,1" /><JD P1="-18,5" P2="15,5" c="e3b55a,8,1,1" /><JD P1="-15,11" P2="10,11" c="e3b55a,2,1,1" /><JD P1="-20,11" P2="-13,12" c="5f5543,1,1,1" /><JD P1="-13,12" P2="6,12" c="5f5543,1,1,1" /><JD P1="6,12" P2="18,11" c="5f5543,1,1,1" /><JD P1="18,11" P2="20,-3" c="5f5543,1,1,1" /><JD P1="20,-3" P2="15,-7" c="5f5543,1,1,1" /><JD P1="15,-7" P2="7,-12" c="5f5543,1,1,1" /><JD P1="7,-12" P2="-1,-14" c="5f5543,1,1,1" /><JD P1="-1,-14" P2="-3,-14" c="5f5543,1,1,1" /><JD P1="-3,-14" P2="-14,-8" c="5f5543,1,1,1" /><JD P1="-14,-8" P2="-15,-7" c="5f5543,1,1,1" /><JD P1="-15,-7" P2="-17,-5" c="5f5543,1,1,1" /><JD P1="-17,-5" P2="-19,-4" c="5f5543,1,1,1" /><JD P1="-19,-4" P2="-22,-4" c="5f5543,1,1,1" /><JD P1="-22,-4" P2="-25,-1" c="5f5543,1,1,1" /><JD P1="-25,-1" P2="-20,11" c="5f5543,1,1,1" /><JD P1="-8,-7" P2="-6,-9" c="d1a753,2,1,1" /><JD P1="1,-6" P2="1,-7" c="d1a753,2,1,1" /><JD P1="-14,5" P2="-12,7" c="d1a753,1,1,1" /><JD P1="-17,8" P2="-15,9" c="d1a753,1,1,1" /><JD P1="-7,-7" P2="-4,-6" c="8c652d,3,1,1" /><JD P1="-3,-6" P2="0,-6" c="8c652d,3,1,1" /><JD P1="-7,-7" P2="-4,-7" c="8c652d,3,1,1" /><JD P1="-3,-7" P2="0,-6" c="8c652d,3,1,1" /><JD P1="6,-4" P2="10,-4" c="684a30,2,1,1" /><JD P1="7,-4" P2="8,-4" c="684a30,3,1,1" /><JD P1="-16,7" P2="-15,6" c="684a30,4,1,1" /><JD P1="-8,5" P2="-7,4" c="684a30,3,1,1" /><JD P1="12,4" P2="13,3" c="684a30,4,1,1" /></L></Z></C>',
		chicken = '<L><JD P1="9,-14" P2="10,-11" c="dbc7a9,10,1,1" /><JD P1="11,-9" P2="10,1" c="dbc7a9,10,1,1" /><JD P1="10,3" P2="5,8" c="dbc7a9,10,1,1" /><JD P1="3,9" P2="-3,7" c="dbc7a9,10,1,1" /><JD P1="3,-15" P2="3,1" c="dbc7a9,10,1,1" /><JD P1="0,1" P2="-1,-15" c="dbc7a9,10,1,1" /><JD P1="-5,-13" P2="-5,-12" c="dbc7a9,10,1,1" /><JD P1="-8,-9" P2="-8,-8" c="dbc7a9,10,1,1" /><JD P1="-8,-4" P2="-8,-3" c="dbc7a9,10,1,1" /><JD P1="-8,2" P2="-8,3" c="dbc7a9,10,1,1" /><JD P1="14,-15" P2="18,-8" c="b4a185,2,1,1" /><JD P1="18,-8" P2="17,4" c="b4a185,2,1,1" /><JD P1="16,4" P2="17,-8" c="b4a185,2,1,1" /><JD P1="17,4" P2="9,14" c="b4a185,2,1,1" /><JD P1="8,13" P2="16,6" c="b4a185,2,1,1" /><JD P1="9,13" P2="6,16" c="b4a185,2,1,1" /><JD P1="6,16" P2="1,16" c="b4a185,2,1,1" /><JD P1="1,16" P2="-4,12" c="b4a185,2,1,1" /><JD P1="-4,12" P2="2,15" c="b4a185,2,1,1" /><JD P1="2,14" P2="8,14" c="b4a185,2,1,1" /><JD P1="1,18" P2="5,19" c="b4a185,2,1,1" /><JD P1="0,21" P2="-1,22" c="b4a185,2,1,1" /><JD P1="7,22" P2="8,21" c="b4a185,2,1,1" /><JD P1="7,21" P2="1,21" c="b4a185,2,1,1" /><JD P1="1,21" P2="7,22" c="b4a185,2,1,1" /><JD P1="6,22" P2="-1,23" c="b4a185,2,1,1" /><JD P1="0,21" P2="1,19" c="b4a185,2,1,1" /><JD P1="1,19" P2="6,20" c="b4a185,2,1,1" /><JD P1="6,20" P2="4,17" c="b4a185,2,1,1" /><JD P1="4,17" P2="2,17" c="b4a185,2,1,1" /><JD P1="24,-11" P2="27,-11" c="b4a185,2,1,1" /><JD P1="23,-9" P2="26,-7" c="b4a185,2,1,1" /><JD P1="23,-5" P2="26,-2" c="b4a185,2,1,1" /><JD P1="21,-4" P2="21,0" c="b4a185,2,1,1" /><JD P1="-22,-11" P2="-18,-10" c="b4a185,2,1,1" /><JD P1="-20,-7" P2="-19,-7" c="b4a185,2,1,1" /><JD P1="-20,-3" P2="-18,-5" c="b4a185,2,1,1" /><JD P1="-16,-4" P2="-16,-1" c="b4a185,2,1,1" /><JD P1="-19,-18" P2="-13,-13" c="f3e5d2,2,1,1" /><JD P1="-13,-13" P2="-19,-16" c="f3e5d2,2,1,1" /><JD P1="-16,-15" P2="-17,-7" c="f3e5d2,2,1,1" /><JD P1="-17,-7" P2="-14,-6" c="f3e5d2,2,1,1" /><JD P1="-14,-6" P2="-14,-13" c="f3e5d2,2,1,1" /><JD P1="-14,-13" P2="-21,-12" c="f3e5d2,2,1,1" /><JD P1="18,-13" P2="22,-6" c="f3e5d2,2,1,1" /><JD P1="22,-6" P2="22,-12" c="f3e5d2,2,1,1" /><JD P1="22,-12" P2="25,-12" c="f3e5d2,2,1,1" /><JD P1="21,-11" P2="20,-14" c="f3e5d2,2,1,1" /><JD P1="20,-14" P2="24,-18" c="f3e5d2,2,1,1" /><JD P1="24,-18" P2="24,-16" c="f3e5d2,2,1,1" /><JD P1="24,-16" P2="21,-14" c="f3e5d2,2,1,1" /><JD P1="-8,12" P2="-14,16" c="cb7521,2,1,1" /><JD P1="-14,13" P2="-12,14" c="cb7521,2,1,1" /><JD P1="-12,15" P2="-11,18" c="cb7521,2,1,1" /><JD P1="13,12" P2="20,16" c="cb7521,2,1,1" /><JD P1="17,15" P2="17,18" c="cb7521,2,1,1" /><JD P1="18,14" P2="20,13" c="cb7521,2,1,1" /><JD P1="5,-22" P2="9,-28" c="a51f1f,2,1,1" /><JD P1="9,-29" P2="4,-22" c="a51f1f,2,1,1" /><JD P1="4,-22" P2="4,-28" c="a51f1f,2,1,1" /><JD P1="4,-28" P2="2,-26" c="a51f1f,2,1,1" /><JD P1="2,-26" P2="2,-22" c="a51f1f,2,1,1" /><JD P1="2,-22" P2="-5,-21" c="a51f1f,2,1,1" /><JD P1="-1,-23" P2="-5,-23" c="a51f1f,2,1,1" /><JD P1="1,-24" P2="-3,-28" c="a51f1f,2,1,1" /><JD P1="-3,-28" P2="-1,-25" c="a51f1f,2,1,1" /><JD P1="3,-1" P2="3,1" c="a51f1f,2,1,1" /><JD P1="3,1" P2="4,1" c="a51f1f,2,1,1" /><JD P1="4,0" P2="4,1" c="a51f1f,2,1,1" /><JD P1="-7,-13" P2="-10,-8" c="fff5e7,2,1,1" /><JD P1="-10,-8" P2="-8,-4" c="fff5e7,2,1,1" /><JD P1="-8,-4" P2="-5,-3" c="fff5e7,2,1,1" /><JD P1="-5,-4" P2="-2,-6" c="fff5e7,2,1,1" /><JD P1="-2,-7" P2="-3,-16" c="fff5e7,2,1,1" /><JD P1="-3,-16" P2="-7,-10" c="fff5e7,2,1,1" /><JD P1="-7,-10" P2="-6,-5" c="fff5e7,2,1,1" /><JD P1="-6,-5" P2="-3,-8" c="fff5e7,2,1,1" /><JD P1="-3,-9" P2="-5,-12" c="fff5e7,2,1,1" /><JD P1="-5,-12" P2="-6,-7" c="fff5e7,2,1,1" /><JD P1="-9,2" P2="-7,3" c="fff5e7,2,1,1" /><JD P1="-7,3" P2="-7,1" c="fff5e7,2,1,1" /><JD P1="-7,1" P2="-9,1" c="fff5e7,2,1,1" /><JD P1="6,-14" P2="5,-10" c="ffffff,2,1,1" /><JD P1="5,-10" P2="6,-5" c="ffffff,2,1,1" /><JD P1="7,-5" P2="10,-5" c="ffffff,2,1,1" /><JD P1="10,-5" P2="13,-8" c="ffffff,2,1,1" /><JD P1="13,-9" P2="11,-13" c="ffffff,2,1,1" /><JD P1="11,-13" P2="8,-13" c="ffffff,2,1,1" /><JD P1="8,-13" P2="6,-8" c="ffffff,2,1,1" /><JD P1="6,-8" P2="9,-6" c="ffffff,2,1,1" /><JD P1="9,-6" P2="11,-8" c="ffffff,2,1,1" /><JD P1="11,-8" P2="10,-13" c="ffffff,2,1,1" /><JD P1="9,-13" P2="8,-8" c="ffffff,2,1,1" /><JD P1="8,-8" P2="10,-8" c="ffffff,2,1,1" /><JD P1="10,-8" P2="10,-11" c="ffffff,2,1,1" /><JD P1="-5,-13" P2="-1,-14" c="ffffff,2,1,1" /><JD P1="-1,-14" P2="-1,-13" c="ffffff,2,1,1" /><JD P1="-1,-14" P2="2,-12" c="ffffff,2,1,1" /><JD P1="3,-12" P2="2,-7" c="ffffff,2,1,1" /><JD P1="1,-7" P2="-1,-5" c="ffffff,2,1,1" /><JD P1="-1,-5" P2="-6,-7" c="ffffff,2,1,1" /><JD P1="-6,-7" P2="-6,-10" c="ffffff,2,1,1" /><JD P1="-6,-10" P2="-1,-7" c="ffffff,2,1,1" /><JD P1="0,-7" P2="-4,-11" c="ffffff,2,1,1" /><JD P1="-4,-12" P2="2,-8" c="ffffff,2,1,1" /><JD P1="-2,-12" P2="2,-10" c="ffffff,2,1,1" /><JD P1="12,-8" P2="12,-9" c="ffffff,2,1,1" /><JD P1="7,-14" P2="11,-13" c="ffffff,2,1,1" /><JD P1="0,-12" P2="-1,-13" c="ffffff,2,1,1" /><JD P1="-2,-13" P2="-5,-7" c="ffffff,2,1,1" /><JD P1="-5,-7" P2="-5,-12" c="ffffff,2,1,1" /><JD P1="-7,-6" P2="-8,-8" c="fff5e7,2,1,1" /><JD P1="-8,-8" P2="-8,-9" c="fff5e7,2,1,1" /><JD P1="-4,-16" P2="-6,-13" c="fff5e7,2,1,1" /><JD P1="3,-7" P2="1,-3" c="d67920,2,1,1" /><JD P1="1,-3" P2="4,-1" c="d67920,2,1,1" /><JD P1="4,-1" P2="5,-3" c="d67920,2,1,1" /><JD P1="5,-3" P2="4,-6" c="d67920,2,1,1" /><JD P1="4,-6" P2="3,-3" c="d67920,2,1,1" /><JD P1="3,-3" P2="2,-4" c="d67920,2,1,1" /><JD P1="2,-4" P2="5,-3" c="d67920,2,1,1" /><JD P1="10,-12" P2="10,-11" c="000000,2,1,1" /><JD P1="-4,-12" P2="-5,-11" c="000000,2,1,1" /></L></Z></C>',
		ghost = '<L><JD P1="0,-20" P2="4,-27" c="b6b5b1,2,1,1" /><JD P1="4,-27" P2="5,-27" c="b6b5b1,2,1,1" /><JD P1="5,-27" P2="8,-24" c="b6b5b1,2,1,1" /><JD P1="8,-24" P2="10,-13" c="b6b5b1,2,1,1" /><JD P1="3,-16" P2="5,-24" c="b6b5b1,4,1,1" /><JD P1="5,-24" P2="7,-14" c="b6b5b1,4,1,1" /><JD P1="4,-21" P2="3,-20" c="b6b5b1,4,1,1" /><JD P1="-1,-5" P2="-5,7" c="e7e5df,13,1,1" /><JD P1="-12,13" P2="-6,9" c="e7e5df,13,1,1" /><JD P1="4,7" P2="4,19" c="e7e5df,13,1,1" /><JD P1="3,3" P2="7,-5" c="e7e5df,13,1,1" /><JD P1="6,-5" P2="5,-10" c="e7e5df,13,1,1" /><JD P1="0,-9" P2="-6,-20" c="e7e5df,13,1,1" /><JD P1="-6,-19" P2="-7,-18" c="e7e5df,13,1,1" /><JD P1="-7,-18" P2="-7,-14" c="e7e5df,13,1,1" /><JD P1="-7,-14" P2="-5,-11" c="e7e5df,13,1,1" /><JD P1="-15,12" P2="-16,12" c="e7e5df,7,1,1" /><JD P1="-15,15" P2="-14,20" c="e7e5df,7,1,1" /><JD P1="-14,20" P2="-10,20" c="e7e5df,7,1,1" /><JD P1="-6,19" P2="-1,16" c="e7e5df,7,1,1" /><JD P1="-4,18" P2="-5,21" c="e7e5df,7,1,1" /><JD P1="8,7" P2="14,-1" c="e7e5df,7,1,1" /><JD P1="14,-2" P2="15,-4" c="e7e5df,7,1,1" /><JD P1="15,-6" P2="17,-8" c="e7e5df,4,1,1" /><JD P1="18,-5" P2="18,-10" c="e7e5df,2,1,1" /><JD P1="18,-10" P2="17,-9" c="e7e5df,2,1,1" /><JD P1="-3,22" P2="-4,25" c="e7e5df,2,1,1" /><JD P1="-4,25" P2="-6,25" c="e7e5df,2,1,1" /><JD P1="-17,16" P2="-20,17" c="e7e5df,2,1,1" /><JD P1="-20,17" P2="-16,18" c="e7e5df,2,1,1" /><JD P1="6,25" P2="8,25" c="e7e5df,2,1,1" /><JD P1="8,25" P2="10,22" c="e7e5df,2,1,1" /><JD P1="-2,-25" P2="-4,-26" c="e7e5df,2,1,1" /><JD P1="9,24" P2="10,24" c="e7e5df,2,1,1" /><JD P1="-12,-15" P2="-12,-20" c="b6b5b1,3,1,1" /><JD P1="-12,-20" P2="-8,-25" c="b6b5b1,3,1,1" /><JD P1="-12,-15" P2="-10,-8" c="b6b5b1,3,1,1" /><JD P1="-10,-8" P2="-9,-7" c="b6b5b1,3,1,1" /><JD P1="-10,-21" P2="-6,-22" c="b6b5b1,3,1,1" /><JD P1="-6,-22" P2="-4,-19" c="b6b5b1,3,1,1" /><JD P1="-4,-19" P2="-4,-14" c="b6b5b1,3,1,1" /><JD P1="-4,-14" P2="-6,-10" c="b6b5b1,3,1,1" /><JD P1="-7,-10" P2="-9,-8" c="b6b5b1,3,1,1" /><JD P1="-8,-12" P2="-8,-17" c="b6b5b1,8,1,1" /><JD P1="-7,-25" P2="-3,-27" c="b6b5b1,1,1,1" /><JD P1="-4,-27" P2="-8,-26" c="b6b5b1,1,1,1" /><JD P1="-9,8" P2="-17,22" c="b6b5b1,1,1,1" /><JD P1="-12,9" P2="-17,17" c="b6b5b1,4,1,1" /><JD P1="-12,8" P2="-18,12" c="b6b5b1,4,1,1" /><JD P1="-14,9" P2="-10,4" c="b6b5b1,2,1,1" /><JD P1="-9,4" P2="-8,1" c="b6b5b1,2,1,1" /><JD P1="-8,1" P2="-11,9" c="b6b5b1,2,1,1" /><JD P1="-10,4" P2="-8,-3" c="b6b5b1,1,1,1" /><JD P1="-8,-3" P2="-8,3" c="b6b5b1,1,1,1" /><JD P1="-15,17" P2="-17,21" c="b6b5b1,1,1,1" /><JD P1="-17,21" P2="-17,18" c="b6b5b1,1,1,1" /><JD P1="-18,16" P2="-20,17" c="b6b5b1,1,1,1" /><JD P1="-20,17" P2="-17,18" c="b6b5b1,1,1,1" /><JD P1="-18,15" P2="-20,17" c="b6b5b1,1,1,1" /><JD P1="-4,12" P2="-10,23" c="b6b5b1,1,1,1" /><JD P1="-4,12" P2="-3,24" c="b6b5b1,1,1,1" /><JD P1="-8,22" P2="-5,16" c="b6b5b1,2,1,1" /><JD P1="-5,16" P2="-4,25" c="b6b5b1,2,1,1" /><JD P1="-4,24" P2="-6,25" c="b6b5b1,2,1,1" /><JD P1="-5,24" P2="-6,20" c="b6b5b1,2,1,1" /><JD P1="-6,24" P2="-7,22" c="b6b5b1,2,1,1" /><JD P1="-5,16" P2="-4,14" c="b6b5b1,1,1,1" /><JD P1="-7,21" P2="-9,22" c="b6b5b1,1,1,1" /><JD P1="3,9" P2="2,25" c="b6b5b1,1,1,1" /><JD P1="3,9" P2="-2,23" c="b6b5b1,1,1,1" /><JD P1="2,16" P2="1,24" c="b6b5b1,2,1,1" /><JD P1="1,23" P2="-1,22" c="b6b5b1,2,1,1" /><JD P1="-1,22" P2="2,14" c="b6b5b1,2,1,1" /><JD P1="-1,-3" P2="4,-3" c="b6b5b1,1,1,1" /><JD P1="4,-3" P2="8,-5" c="b6b5b1,1,1,1" /><JD P1="8,-5" P2="13,-7" c="b6b5b1,1,1,1" /><JD P1="3,3" P2="8,1" c="b6b5b1,1,1,1" /><JD P1="8,1" P2="7,3" c="b6b5b1,1,1,1" /><JD P1="7,3" P2="4,4" c="b6b5b1,1,1,1" /><JD P1="4,4" P2="7,6" c="b6b5b1,1,1,1" /><JD P1="7,6" P2="10,2" c="b6b5b1,1,1,1" /><JD P1="10,2" P2="10,9" c="b6b5b1,1,1,1" /><JD P1="1,-2" P2="6,-2" c="b6b5b1,2,1,1" /><JD P1="6,-2" P2="13,-6" c="b6b5b1,2,1,1" /><JD P1="13,-6" P2="2,-1" c="b6b5b1,2,1,1" /><JD P1="2,-1" P2="3,2" c="b6b5b1,2,1,1" /><JD P1="3,2" P2="12,-2" c="b6b5b1,2,1,1" /><JD P1="3,0" P2="13,-4" c="b6b5b1,2,1,1" /><JD P1="14,-5" P2="18,-10" c="b6b5b1,2,1,1" /><JD P1="18,-10" P2="17,-1" c="b6b5b1,2,1,1" /><JD P1="17,-1" P2="11,6" c="b6b5b1,2,1,1" /><JD P1="11,6" P2="11,-1" c="b6b5b1,2,1,1" /><JD P1="12,3" P2="16,-6" c="b6b5b1,4,1,1" /><JD P1="12,6" P2="11,8" c="b6b5b1,1,1,1" /><JD P1="10,0" P2="8,3" c="b6b5b1,2,1,1" /><JD P1="8,3" P2="7,5" c="b6b5b1,2,1,1" /><JD P1="6,4" P2="5,4" c="b6b5b1,1,1,1" /><JD P1="12,6" P2="11,8" c="b6b5b1,1,1,1" /><JD P1="-8,-27" P2="-12,-23" c="0,1,1,1" /><JD P1="-12,-23" P2="-14,-18" c="0,1,1,1" /><JD P1="-14,-18" P2="-13,-12" c="0,1,1,1" /><JD P1="-13,-12" P2="-11,-7" c="0,1,1,1" /><JD P1="-11,-7" P2="-8,-5" c="0,1,1,1" /><JD P1="-8,-5" P2="-11,4" c="0,1,1,1" /><JD P1="-11,4" P2="-20,11" c="0,1,1,1" /><JD P1="-20,11" P2="-19,15" c="0,1,1,1" /><JD P1="-19,15" P2="-21,17" c="0,1,1,1" /><JD P1="-21,17" P2="-18,19" c="0,1,1,1" /><JD P1="-18,19" P2="-18,22" c="0,1,1,1" /><JD P1="-18,22" P2="-15,23" c="0,1,1,1" /><JD P1="-15,23" P2="-13,24" c="0,1,1,1" /><JD P1="-13,24" P2="-8,23" c="0,1,1,1" /><JD P1="-8,23" P2="-7,24" c="0,1,1,1" /><JD P1="-7,24" P2="-7,26" c="0,1,1,1" /><JD P1="-7,26" P2="-3,26" c="0,1,1,1" /><JD P1="-3,26" P2="1,15" c="0,1,1,1" /><JD P1="-2,23" P2="2,26" c="0,1,1,1" /><JD P1="2,26" P2="8,26" c="0,1,1,1" /><JD P1="8,26" P2="11,24" c="0,1,1,1" /><JD P1="11,24" P2="10,9" c="0,1,1,1" /><JD P1="-8,-27" P2="-3,-27" c="0,1,1,1" /><JD P1="-3,-27" P2="0,-24" c="0,1,1,1" /><JD P1="0,-24" P2="3,-17" c="0,1,1,1" /><JD P1="3,-17" P2="5,-17" c="0,1,1,1" /><JD P1="5,-17" P2="8,-16" c="0,1,1,1" /><JD P1="6,2" P2="11,-2" c="0,1,1,1" /><JD P1="11,-2" P2="14,-7" c="0,1,1,1" /><JD P1="14,-7" P2="12,-10" c="0,1,1,1" /><JD P1="12,-10" P2="11,-14" c="0,1,1,1" /><JD P1="11,-14" P2="8,-16" c="0,1,1,1" /><JD P1="-7,-8" P2="-8,-5" c="0,1,1,1" /><JD P1="-8,-5" P2="-7,3" c="0,1,1,1" /><JD P1="-7,3" P2="-9,8" c="0,1,1,1" /><JD P1="-7,-8" P2="-6,-9" c="0,1,1,1" /><JD P1="-6,-9" P2="-3,-7" c="0,1,1,1" /><JD P1="-3,-7" P2="4,6" c="0,1,1,1" /><JD P1="-5,10" P2="-9,19" c="0,1,1,1" /><JD P1="-19,15" P2="-12,8" c="0,1,1,1" /><JD P1="-2,18" P2="-7,24" c="0,1,1,1" /><JD P1="14,-7" P2="17,-11" c="0,1,1,1" /><JD P1="17,-11" P2="18,-12" c="0,1,1,1" /><JD P1="18,-12" P2="19,-10" c="0,1,1,1" /><JD P1="19,-10" P2="19,-6" c="0,1,1,1" /><JD P1="19,-6" P2="18,0" c="0,1,1,1" /><JD P1="18,0" P2="10,10" c="0,1,1,1" /><JD P1="1,-13" P2="6,-10" c="0,1,1,1" /><JD P1="6,-10" P2="4,-9" c="0,1,1,1" /><JD P1="4,-9" P2="2,-9" c="0,1,1,1" /><JD P1="2,-9" P2="1,-10" c="0,1,1,1" /><JD P1="1,-10" P2="1,-13" c="0,1,1,1" /><JD P1="2,-12" P2="4,-10" c="0,1,1,1" /><JD P1="4,-10" P2="2,-10" c="0,1,1,1" /><JD P1="3,-10" P2="2,-12" c="0,1,1,1" /><JD P1="2,-12" P2="2,-10" c="0,1,1,1" /><JD P1="4,-10" P2="5,-10" c="0,1,1,1" /><JD P1="10,-11" P2="11,-12" c="0,1,1,1" /><JD P1="10,-11" P2="12,-10" c="0,1,1,1" /><JD P1="11,-12" P2="11,-11" c="0,1,1,1" /><JD P1="3,-28" P2="1,-23" c="0,1,1,1" /><JD P1="3,-28" P2="6,-28" c="0,1,1,1" /><JD P1="6,-28" P2="9,-24" c="0,1,1,1" /><JD P1="9,-24" P2="11,-14" c="0,1,1,1" /></L></Z></C>',
		hole = '<L><JD P1="0,-16" P2="7,-14" c="332117,9,1,1" /><JD P1="10,-12" P2="15,-4" c="332117,8,1,1" /><JD P1="15,-4" P2="16,5" c="332117,8,1,1" /><JD P1="19,8" P2="9,8" c="332117,2,1,1" /><JD P1="7,-1" P2="8,4" c="2b2b2b,9,1,1" /><JD P1="-13,6" P2="-16,6" c="141414,7,1,1" /><JD P1="2,-9" P2="5,-4" c="202020,11,1,1" /><JD P1="-3,-12" P2="-7,-8" c="181818,15,1,1" /><JD P1="11,8" P2="5,8" c="2b2b2b,2,1,1" /><JD P1="-13,1" P2="-13,2" c="503b24,3,1,1" /><JD P1="-7,-4" P2="-1,1" c="503b24,8,1,1" /><JD P1="-14,-7" P2="-11,-1" c="503b24,6,1,1" /><JD P1="2,5" P2="-10,4" c="503b24,6,1,1" /><JD P1="-16,-1" P2="-17,1" c="836f56,5,1,1" /><JD P1="-8,2" P2="-7,2" c="1c120c,5,1,1" /><JD P1="-7,1" P2="-7,2" c="a9a8a8,2,1,1" /><JD P1="-10,3" P2="-9,3" c="a9a8a8,1,1,1" /><JD P1="3,3" P2="4,3" c="c8a782,1,1,1" /><JD P1="5,3" P2="3,4" c="c8a782,1,1,1" /><JD P1="-15,-9" P2="-12,-7" c="433120,2,1,1" /><JD P1="-12,-7" P2="-12,-1" c="433120,2,1,1" /><JD P1="-12,6" P2="-5,8" c="372311,2,1,1" /><JD P1="-5,8" P2="4,7" c="372311,2,1,1" /><JD P1="-6,-15" P2="-6,-8" c="1d150f,2,1,1" /><JD P1="20,8" P2="20,1" c="1d1b1a,1,1,1" /><JD P1="20,1" P2="19,-3" c="1d1b1a,1,1,1" /><JD P1="19,-3" P2="18,-6" c="1d1b1a,1,1,1" /><JD P1="18,-6" P2="15,-12" c="1d1b1a,1,1,1" /><JD P1="15,-12" P2="8,-19" c="1d1b1a,1,1,1" /><JD P1="8,-19" P2="0,-21" c="1d1b1a,1,1,1" /><JD P1="-19,8" P2="-19,0" c="2f2f2e,1,1,1" /><JD P1="-19,0" P2="-18,-4" c="2f2f2e,1,1,1" /><JD P1="-18,-4" P2="-17,-7" c="2f2f2e,1,1,1" /><JD P1="-17,-7" P2="-13,-13" c="2f2f2e,1,1,1" /><JD P1="-13,-13" P2="-8,-18" c="2f2f2e,1,1,1" /><JD P1="-8,-18" P2="0,-21" c="2f2f2e,1,1,1" /><JD P1="-19,9" P2="20,9" c="1d1b1a,1,1,1" /><JD P1="12,8" P2="12,2" c="140e0b,1,1,1" /><JD P1="12,2" P2="11,-5" c="140e0b,1,1,1" /><JD P1="11,-5" P2="7,-12" c="140e0b,1,1,1" /><JD P1="7,-12" P2="3,-17" c="140e0b,1,1,1" /><JD P1="3,-17" P2="-1,-19" c="140e0b,1,1,1" /><JD P1="-1,-19" P2="-5,-19" c="140e0b,1,1,1" /><JD P1="-14,-10" P2="-12,-9" c="3d2c1c,1,1,1" /><JD P1="-12,-9" P2="-11,-6" c="3d2c1c,1,1,1" /><JD P1="-11,-6" P2="-9,-8" c="3d2c1c,1,1,1" /><JD P1="-9,-8" P2="-8,-8" c="3d2c1c,1,1,1" /><JD P1="-8,-8" P2="-5,-7" c="3d2c1c,1,1,1" /><JD P1="-5,-7" P2="-4,-6" c="3d2c1c,1,1,1" /><JD P1="-4,-6" P2="-1,-5" c="3d2c1c,1,1,1" /><JD P1="-1,-5" P2="2,-2" c="3d2c1c,1,1,1" /><JD P1="2,-2" P2="3,1" c="3d2c1c,1,1,1" /><JD P1="3,1" P2="4,2" c="3d2c1c,1,1,1" /><JD P1="4,2" P2="5,3" c="3d2c1c,1,1,1" /><JD P1="5,3" P2="5,6" c="3d2c1c,1,1,1" /><JD P1="5,6" P2="5,7" c="3d2c1c,1,1,1" /><JD P1="5,7" P2="3,8" c="3d2c1c,1,1,1" /><JD P1="-18,4" P2="-14,3" c="372311,1,1,1" /><JD P1="-14,2" P2="-13,7" c="372311,1,1,1" /><JD P1="-13,7" P2="-10,8" c="372311,1,1,1" /><JD P1="-10,8" P2="3,8" c="372311,1,1,1" /></L></Z></C>',
		mouse = '<L><JD P1="-19,-32" P2="-16,-28" c="edc49a,2,1,1" /><JD P1="-16,-28" P2="-13,-21" c="edc49a,2,1,1" /><JD P1="-15,-9" P2="-12,-19" c="edc49a,4,1,1" /><JD P1="-14,2" P2="-9,7" c="cd9c6d,3,1,1" /><JD P1="4,11" P2="10,12" c="ba9a79,4,1,1" /><JD P1="9,13" P2="11,12" c="edc49a,2,1,1" /><JD P1="-5,12" P2="2,13" c="ba9a79,4,1,1" /><JD P1="0,14" P2="3,13" c="edc49a,2,1,1" /><JD P1="8,-25" P2="9,-32" c="453121,3,1,1" /><JD P1="10,-33" P2="10,-22" c="453121,2,1,1" /><JD P1="5,5" P2="4,4" c="4a3624,16,1,1" /><JD P1="6,-2" P2="5,5" c="2f1e0e,14,1,1" /><JD P1="4,-2" P2="4,4" c="4f3218,16,1,1" /><JD P1="-15,-2" P2="-14,1" c="cd9c6d,4,1,1" /><JD P1="-15,-3" P2="-9,4" c="edc49a,4,1,1" /><JD P1="-3,0" P2="3,-6" c="78583a,10,1,1" /><JD P1="5,-26" P2="5,-25" c="7d5b37,4,1,1" /><JD P1="-5,-22" P2="-4,-22" c="5c4327,19,1,1" /><JD P1="-5,-22" P2="-4,-22" c="7d5b37,18,1,1" /><JD P1="-6,-22" P2="-4,-21" c="5c4327,16,1,1" /><JD P1="-6,-22" P2="-4,-21" c="edc59a,15,1,1" /><JD P1="-6,-21" P2="-6,-20" c="9f7551,17,1,1" /><JD P1="-4,-26" P2="0,-24" c="9f7551,6,1,1" /><JD P1="-9,-24" P2="-8,-24" c="cd9c6d,8,1,1" /><JD P1="-9,-24" P2="-10,-22" c="cd9c6d,9,1,1" /><JD P1="-7,-20" P2="-7,-19" c="edc49a,13,1,1" /><JD P1="-1,-20" P2="-1,-19" c="5c4327,12,1,1" /><JD P1="11,-6" P2="14,0" c="4f3218,5,1,1" /><JD P1="-1,-19" P2="-1,-18" c="edc59a,13,1,1" /><JD P1="0,-24" P2="3,-23" c="9f7551,3,1,1" /><JD P1="1,-23" P2="1,-20" c="9f7551,4,1,1" /><JD P1="-1,-23" P2="1,-20" c="cd9c6d,4,1,1" /><JD P1="3,-19" P2="5,-24" c="5c4327,4,1,1" /><JD P1="3,-19" P2="5,-24" c="7d5b37,3,1,1" /><JD P1="5,-26" P2="6,-24" c="7d5b37,3,1,1" /><JD P1="6,-17" P2="8,-21" c="7d5b37,8,1,1" /><JD P1="-4,-21" P2="-2,-22" c="cd9c6d,6,1,1" /><JD P1="-5,-19" P2="-5,-18" c="edc49a,8,1,1" /><JD P1="3,2" P2="4,-2" c="78583a,14,1,1" /><JD P1="6,-14" P2="8,-13" c="4f3218,15,1,1" /><JD P1="-2,5" P2="-1,5" c="2f1e0e,16,1,1" /><JD P1="-2,5" P2="-1,5" c="4f3218,15,1,1" /><JD P1="-2,4" P2="0,4" c="78583a,14,1,1" /><JD P1="3,-3" P2="8,1" c="2f1e0e,5,1,1" /><JD P1="0,-5" P2="8,1" c="78583a,4,1,1" /><JD P1="3,-5" P2="7,-1" c="78583a,4,1,1" /><JD P1="7,-17" P2="12,-16" c="7d5b37,13,1,1" /><JD P1="13,-10" P2="17,-13" c="4f3218,10,1,1" /><JD P1="9,-12" P2="18,-15" c="7d5b37,6,1,1" /><JD P1="11,-19" P2="10,-18" c="7d5b37,13,1,1" /><JD P1="14,-18" P2="14,-17" c="7d5b37,10,1,1" /><JD P1="9,-24" P2="9,-23" c="7d5b37,6,1,1" /><JD P1="9,-24" P2="11,-26" c="694d33,1,1,1" /><JD P1="6,-27" P2="7,-26" c="694d33,1,1,1" /><JD P1="9,-37" P2="8,-31" c="453121,1,1,1" /><JD P1="10,-36" P2="10,-34" c="453121,2,1,1" /><JD P1="10,-37" P2="10,-36" c="453121,2,1,1" /><JD P1="19,-14" P2="21,-15" c="f7dac0,1,1,1" /><JD P1="20,-14" P2="21,-13" c="f7dac0,1,1,1" /><JD P1="21,-14" P2="21,-15" c="f7dac0,1,1,1" /><JD P1="20,-14" P2="21,-13" c="c7a079,1,1,1" /><JD P1="8,-16" P2="9,-16" c="1c130e,5,1,1" /><JD P1="9,-17" P2="9,-16" c="ffffff,2,1,1" /><JD P1="8,-15" P2="10,-15" c="1c130e,2,1,1" /><JD P1="7,-16" P2="7,-15" c="ffffff,1,1,1" /><JD P1="7,-16" P2="9,-15" c="1c130e,1,1,1" /><JD P1="-15,-8" P2="-13,-1" c="edc49a,3,1,1" /><JD P1="-15,-8" P2="-15,-4" c="edc49a,4,1,1" /><JD P1="-5,-5" P2="5,-10" c="502c1d,1,1,1" /><JD P1="6,-10" P2="13,-11" c="502c1d,1,1,1" /><JD P1="1,-1" P2="8,-7" c="502c1d,1,1,1" /><JD P1="8,-7" P2="15,-10" c="502c1d,1,1,1" /></L></Z></C>',
		portal_blue = '<L><JD P1="0,0" P2="0,1" c="4148b3,43,1,1" /><JD P1="0,0" P2="0,1" c="4148b3,45,0.53,1" /><JD P1="0,0" P2="0,1" c="4148b3,47,0.27,1" /><JD P1="0,0" P2="0,1" c="3e63d1,49,0.25,1" /><JD P1="0,0" P2="0,1" c="4148b3,51,0.1,1" /><JD P1="0,0" P2="0,1" c="4148b3,53,0.31,1" /><JD P1="0,0" P2="0,1" c="252c99,40,1,1" /><JD P1="0,0" P2="0,1" c="1e248a,30,0.21,1" /><JD P1="0,0" P2="0,1" c="171d82,20,0.17,1" /><JD P1="20,-1" P2="20,0" c="3e63d1,1,1,1" /><JD P1="4,2" P2="4,3" c="3e63d1,1,1,1" /><JD P1="2,-4" P2="2,-3" c="3e63d1,1,1,1" /><JD P1="-9,-3" P2="-9,-2" c="3e63d1,1,1,1" /><JD P1="-6,2" P2="-6,3" c="3e63d1,1,1,1" /><JD P1="-4,1" P2="-4,2" c="3e63d1,1,1,1" /><JD P1="-4,-8" P2="-4,-7" c="3e63d1,1,1,1" /><JD P1="3,-12" P2="3,-11" c="3e63d1,1,1,1" /><JD P1="14,-10" P2="14,-9" c="3e63d1,1,1,1" /><JD P1="8,2" P2="8,3" c="3e63d1,1,1,1" /><JD P1="0,6" P2="0,7" c="3e63d1,1,1,1" /><JD P1="1,21" P2="1,22" c="3e63d1,1,1,1" /><JD P1="-19,-7" P2="-19,-6" c="3e63d1,1,1,1" /><JD P1="3,20" P2="3,21" c="3e63d1,5,1,1" /><JD P1="-4,-20" P2="-4,-19" c="3e63d1,5,1,1" /><JD P1="11,-17" P2="11,-16" c="3e63d1,3,1,1" /><JD P1="-15,-13" P2="-15,-12" c="3e63d1,3,1,1" /><JD P1="-8,19" P2="-8,20" c="3e63d1,3,1,1" /><JD P1="15,13" P2="15,14" c="3e63d1,3,1,1" /><JD P1="18,-8" P2="18,-7" c="3e63d1,3,1,1" /><JD P1="-17,10" P2="-17,11" c="3e63d1,3,1,1" /><JD P1="0,2" P2="0,3" c="3e63d1,3,1,1" /><JD P1="6,8" P2="6,9" c="3e63d1,2,1,1" /><JD P1="-20,-1" P2="-20,0" c="3e63d1,2,1,1" /><JD P1="-18,8" P2="-18,9" c="3e63d1,2,1,1" /><JD P1="5,20" P2="5,21" c="3e63d1,2,1,1" /><JD P1="19,-6" P2="19,-5" c="3e63d1,2,1,1" /><JD P1="11,1" P2="11,2" c="3e63d1,2,1,1" /><JD P1="8,-6" P2="8,-5" c="3e63d1,2,1,1" /><JD P1="-9,3" P2="-9,4" c="3e63d1,2,1,1" /><JD P1="19,7" P2="19,8" c="3e63d1,2,1,1" /><JD P1="9,-18" P2="9,-17" c="3e63d1,4,1,1" /><JD P1="-3,-4" P2="-3,-3" c="3e63d1,4,1,1" /><JD P1="-13,-15" P2="-13,-14" c="3e63d1,4,1,1" /><JD P1="-20,1" P2="-20,2" c="3e63d1,4,1,1" /><JD P1="-1,-20" P2="-1,-19" c="3e63d1,2,1,1" /><JD P1="20,3" P2="20,4" c="3e63d1,2,1,1" /><JD P1="-14,15" P2="-14,16" c="3e63d1,2,1,1" /><JD P1="-17,-10" P2="-17,-9" c="3e63d1,2,1,1" /><JD P1="15,6" P2="15,7" c="3e63d1,2,1,1" /><JD P1="3,-20" P2="3,-19" c="3e63d1,2,1,1" /></L></Z></C>',
		portal_orange = '<L><JD P1="0,0" P2="0,1" c="b38e20,43,1,1" /><JD P1="0,0" P2="0,1" c="b38e20,45,0.53,1" /><JD P1="0,0" P2="0,1" c="b38e20,47,0.27,1" /><JD P1="0,0" P2="0,1" c="b38e20,49,0.25,1" /><JD P1="0,0" P2="0,1" c="b38e20,51,0.1,1" /><JD P1="0,0" P2="0,1" c="b38e20,53,0.31,1" /><JD P1="0,0" P2="0,1" c="b36c20,40,1,1" /><JD P1="0,0" P2="0,1" c="9c5d19,30,0.21,1" /><JD P1="0,0" P2="0,1" c="915312,20,0.17,1" /><JD P1="14,15" P2="14,16" c="dba614,6,1,1" /><JD P1="19,6" P2="19,7" c="dba614,6,1,1" /><JD P1="1,-20" P2="1,-19" c="dba614,6,1,1" /><JD P1="18,-10" P2="18,-9" c="dba614,3,1,1" /><JD P1="-20,1" P2="-20,2" c="dba614,3,1,1" /><JD P1="-12,-16" P2="-12,-15" c="dba614,3,1,1" /><JD P1="-9,17" P2="-9,18" c="dba614,3,1,1" /><JD P1="7,4" P2="7,5" c="dba614,3,1,1" /><JD P1="-7,-6" P2="-7,-5" c="dba614,3,1,1" /><JD P1="-17,10" P2="-17,11" c="dba614,3,1,1" /><JD P1="10,-17" P2="10,-16" c="dba614,3,1,1" /><JD P1="10,1" P2="10,2" c="dba614,1,1,1" /><JD P1="2,-4" P2="2,-3" c="dba614,1,1,1" /><JD P1="6,-8" P2="6,-7" c="dba614,1,1,1" /><JD P1="-2,-5" P2="-2,-4" c="dba614,1,1,1" /><JD P1="-4,1" P2="-4,2" c="dba614,1,1,1" /><JD P1="6,-1" P2="6,0" c="dba614,1,1,1" /><JD P1="10,-5" P2="10,-4" c="dba614,1,1,1" /><JD P1="-18,-8" P2="-18,-7" c="dba614,1,1,1" /><JD P1="-17,-11" P2="-17,-10" c="dba614,1,1,1" /><JD P1="-15,-13" P2="-15,-12" c="dba614,1,1,1" /><JD P1="20,-1" P2="20,0" c="dba614,2,1,1" /><JD P1="6,19" P2="6,20" c="dba614,2,1,1" /><JD P1="-8,8" P2="-8,9" c="dba614,2,1,1" /><JD P1="0,5" P2="0,6" c="dba614,2,1,1" /><JD P1="2,11" P2="2,12" c="dba614,2,1,1" /><JD P1="0,-9" P2="0,-8" c="dba614,2,1,1" /><JD P1="-9,2" P2="-9,3" c="dba614,2,1,1" /><JD P1="1,1" P2="1,2" c="dba614,2,1,1" /><JD P1="0,20" P2="0,21" c="dba614,2,1,1" /><JD P1="15,-13" P2="15,-12" c="dba614,2,1,1" /><JD P1="-7,-19" P2="-7,-18" c="dba614,3,1,1" /><JD P1="3,4" P2="3,5" c="dba614,3,1,1" /><JD P1="-19,-5" P2="-19,-4" c="dba614,3,1,1" /><JD P1="19,-5" P2="19,-4" c="dba614,3,1,1" /><JD P1="11,16" P2="11,17" c="dba614,3,1,1" /><JD P1="4,-19" P2="4,-18" c="dba614,3,1,1" /><JD P1="-8,18" P2="-8,19" c="dba614,1,1,1" /><JD P1="-11,17" P2="-11,18" c="dba614,1,1,1" /><JD P1="-12,15" P2="-12,16" c="dba614,1,1,1" /><JD P1="18,9" P2="18,10" c="dba614,2,1,1" /></L></Z></C>',
		troll = '<L><JD P1="2,-13" P2="40,-13" c="eeeeee,20,1,1" /><JD P1="-1,-24" P2="-1,-25" c="eeeeee,20,1,1" /><JD P1="-1,-25" P2="36,-22" c="eeeeee,20,1,1" /><JD P1="36,-22" P2="36,-23" c="eeeeee,20,1,1" /><JD P1="36,-23" P2="16,-25" c="eeeeee,20,1,1" /><JD P1="-1,-24" P2="-10,-12" c="eeeeee,20,1,1" /><JD P1="-10,-12" P2="-1,-1" c="eeeeee,20,1,1" /><JD P1="-1,-1" P2="27,11" c="eeeeee,20,1,1" /><JD P1="27,11" P2="37,13" c="eeeeee,20,1,1" /><JD P1="37,13" P2="37,-3" c="eeeeee,20,1,1" /><JD P1="37,-3" P2="27,-2" c="eeeeee,20,1,1" /><JD P1="-17,-7" P2="-18,-9" c="222222,1,1,1" /><JD P1="-18,-9" P2="-19,-15" c="222222,1,1,1" /><JD P1="-19,-15" P2="-16,-20" c="222222,1,1,1" /><JD P1="-16,-20" P2="-11,-21" c="222222,1,1,1" /><JD P1="4,-12" P2="9,-12" c="222222,1,1,1" /><JD P1="9,-12" P2="12,-13" c="222222,1,1,1" /><JD P1="37,-20" P2="43,-20" c="222222,1,1,1" /><JD P1="43,-20" P2="45,-19" c="222222,1,1,1" /><JD P1="45,-19" P2="46,-13" c="222222,1,1,1" /><JD P1="46,-13" P2="44,-11" c="222222,1,1,1" /><JD P1="43,-9" P2="48,-10" c="222222,1,1,1" /><JD P1="-3,5" P2="12,13" c="222222,1,1,1" /><JD P1="12,13" P2="22,13" c="222222,1,1,1" /><JD P1="22,13" P2="24,14" c="222222,1,1,1" /><JD P1="24,14" P2="32,14" c="222222,1,1,1" /><JD P1="32,14" P2="37,13" c="222222,1,1,1" /><JD P1="37,13" P2="39,10" c="222222,1,1,1" /><JD P1="43,10" P2="42,13" c="222222,1,1,1" /><JD P1="42,13" P2="37,17" c="222222,1,1,1" /><JD P1="37,17" P2="12,15" c="222222,1,1,1" /><JD P1="12,15" P2="-6,6" c="222222,1,1,1" /><JD P1="-7,-27" P2="5,-33" c="222222,1,1,1" /><JD P1="5,-33" P2="19,-33" c="222222,1,1,1" /><JD P1="19,-33" P2="27,-33" c="222222,1,1,1" /><JD P1="27,-33" P2="29,-32" c="222222,1,1,1" /><JD P1="-5,-25" P2="2,-30" c="222222,1,1,1" /><JD P1="2,-30" P2="12,-32" c="222222,1,1,1" /><JD P1="12,-32" P2="18,-30" c="222222,1,1,1" /><JD P1="18,-30" P2="36,-30" c="222222,1,1,1" /><JD P1="-3,-24" P2="4,-29" c="222222,1,1,1" /><JD P1="4,-29" P2="14,-29" c="222222,1,1,1" /><JD P1="14,-29" P2="14,-26" c="222222,1,1,1" /><JD P1="24,-23" P2="27,-28" c="222222,1,1,1" /><JD P1="27,-28" P2="32,-28" c="222222,1,1,1" /><JD P1="32,-28" P2="35,-27" c="222222,1,1,1" /><JD P1="35,-27" P2="37,-24" c="222222,1,1,1" /><JD P1="31,-10" P2="33,-8" c="222222,1,1,1" /><JD P1="15,-13" P2="12,-11" c="111111,2,1,1" /><JD P1="12,-11" P2="12,-9" c="111111,2,1,1" /><JD P1="15,-10" P2="18,-10" c="111111,2,1,1" /><JD P1="22,-7" P2="24,-7" c="111111,2,1,1" /><JD P1="24,-7" P2="28,-11" c="111111,2,1,1" /><JD P1="28,-11" P2="24,-14" c="111111,2,1,1" /><JD P1="24,-14" P2="25,-18" c="111111,2,1,1" /><JD P1="25,-18" P2="22,-19" c="111111,2,1,1" /><JD P1="25,-18" P2="29,-21" c="111111,2,1,1" /><JD P1="35,-21" P2="35,-20" c="111111,2,1,1" /><JD P1="7,-22" P2="3,-21" c="111111,2,1,1" /><JD P1="6,-23" P2="3,-22" c="111111,2,1,1" /><JD P1="6,-19" P2="2,-16" c="111111,2,1,1" /><JD P1="2,-16" P2="-2,-15" c="111111,2,1,1" /><JD P1="-2,-15" P2="-8,-18" c="111111,2,1,1" /><JD P1="-8,-18" P2="-15,-16" c="111111,2,1,1" /><JD P1="-15,-16" P2="-16,-12" c="111111,2,1,1" /><JD P1="-16,-12" P2="-15,-8" c="111111,2,1,1" /><JD P1="-13,-11" P2="-10,-12" c="111111,2,1,1" /><JD P1="-10,-12" P2="-9,-15" c="111111,2,1,1" /><JD P1="-9,-14" P2="9,-7" c="111111,2,1,1" /><JD P1="9,-7" P2="21,-4" c="111111,2,1,1" /><JD P1="21,-4" P2="30,-5" c="111111,2,1,1" /><JD P1="30,-5" P2="36,-7" c="111111,2,1,1" /><JD P1="36,-7" P2="40,-13" c="111111,2,1,1" /><JD P1="40,-13" P2="42,-4" c="111111,2,1,1" /><JD P1="42,-4" P2="40,6" c="111111,2,1,1" /><JD P1="40,6" P2="32,9" c="111111,2,1,1" /><JD P1="32,9" P2="13,9" c="111111,2,1,1" /><JD P1="13,9" P2="2,4" c="111111,2,1,1" /><JD P1="2,4" P2="-7,-4" c="111111,2,1,1" /><JD P1="-7,-4" P2="-10,-11" c="111111,2,1,1" /><JD P1="41,-2" P2="36,0" c="111111,2,1,1" /><JD P1="36,0" P2="16,1" c="111111,2,1,1" /><JD P1="16,1" P2="27,2" c="111111,2,1,1" /><JD P1="27,2" P2="39,2" c="111111,2,1,1" /><JD P1="34,2" P2="41,0" c="111111,2,1,1" /><JD P1="17,1" P2="-8,-7" c="111111,2,1,1" /><JD P1="10,-6" P2="7,5" c="111111,2,1,1" /><JD P1="19,-4" P2="17,7" c="111111,2,1,1" /><JD P1="26,-4" P2="25,8" c="111111,2,1,1" /><JD P1="32,-5" P2="33,0" c="111111,2,1,1" /><JD P1="36,-7" P2="37,0" c="111111,2,1,1" /><JD P1="39,-9" P2="41,-4" c="111111,2,1,1" /><JD P1="38,2" P2="38,6" c="111111,2,1,1" /><JD P1="35,2" P2="34,7" c="111111,2,1,1" /><JD P1="32,2" P2="30,8" c="111111,2,1,1" /><JD P1="-1,-10" P2="-1,1" c="111111,2,1,1" /><JD P1="3,-20" P2="-1,-19" c="111111,1,1,1" /><JD P1="-1,-21" P2="2,-23" c="111111,1,1,1" /><JD P1="8,-23" P2="12,-23" c="111111,1,1,1" /><JD P1="12,-23" P2="15,-20" c="111111,1,1,1" /><JD P1="15,-20" P2="14,-18" c="111111,1,1,1" /><JD P1="14,-18" P2="11,-19" c="111111,1,1,1" /><JD P1="11,-19" P2="6,-20" c="111111,1,1,1" /><JD P1="29,-21" P2="31,-22" c="111111,1,1,1" /><JD P1="31,-22" P2="35,-21" c="111111,1,1,1" /><JD P1="35,-20" P2="33,-19" c="111111,1,1,1" /><JD P1="33,-19" P2="28,-19" c="111111,1,1,1" /><JD P1="32,-15" P2="35,-14" c="111111,2,1,1" /><JD P1="35,-14" P2="39,-16" c="111111,2,1,1" /><JD P1="39,-16" P2="43,-15" c="111111,2,1,1" /><JD P1="4,-23" P2="7,-23" c="111111,2,1,1" /><JD P1="6,-23" P2="3,-23" c="111111,2,1,1" /><JD P1="4,-21" P2="7,-21" c="111111,2,1,1" /><JD P1="7,-21" P2="4,-21" c="111111,2,1,1" /><JD P1="29,-20" P2="30,-20" c="111111,2,1,1" /><JD P1="30,-20" P2="30,-21" c="111111,2,1,1" /><JD P1="-16,-5" P2="-20,-8" c="111111,2,1,1" /><JD P1="-20,-8" P2="-21,-14" c="111111,2,1,1" /><JD P1="-21,-14" P2="-17,-20" c="111111,2,1,1" /><JD P1="-17,-20" P2="-14,-23" c="111111,2,1,1" /><JD P1="-14,-23" P2="-5,-35" c="111111,2,1,1" /><JD P1="-5,-35" P2="25,-35" c="111111,2,1,1" /><JD P1="25,-35" P2="38,-33" c="111111,2,1,1" /><JD P1="38,-33" P2="44,-28" c="111111,2,1,1" /><JD P1="44,-28" P2="46,-23" c="111111,2,1,1" /><JD P1="46,-23" P2="50,-18" c="111111,2,1,1" /><JD P1="50,-18" P2="50,-10" c="111111,2,1,1" /><JD P1="50,-10" P2="50,-9" c="111111,2,1,1" /><JD P1="50,-10" P2="47,-4" c="111111,2,1,1" /><JD P1="47,-4" P2="47,9" c="111111,2,1,1" /><JD P1="47,9" P2="47,17" c="111111,2,1,1" /><JD P1="47,17" P2="41,23" c="111111,2,1,1" /><JD P1="41,23" P2="27,22" c="111111,2,1,1" /><JD P1="27,22" P2="3,13" c="111111,2,1,1" /><JD P1="3,13" P2="-11,4" c="111111,2,1,1" /><JD P1="-11,4" P2="-17,-5" c="111111,2,1,1" /></L></Z></C>',
	}	
	
	removeJoint = function(id)
		if _J[id] then
			for k,v in next,_J[id].id do
				tfm.exec.removeJoint(v)
			end
			_J[id] = nil
			return true
		end
		return false
	end	
	translateJoint = function(id, xml, x, y, foreground, f)
		if type(id) == "string" then
			xml, x, y, foreground, f = id, xml, x, y, foreground
			id = #_J + 1
		end
		if type(foreground) == "function" then
			f = foreground
			foreground = false
		end
		
		xml = _DRAWINGS[xml] or xml
		
		local joints = {}
		local L = xml:match("<L>(.*)</L>")
		if L then
			removeJoint(id)
			
			local center = {0, 0, 0}
			local min, max = {0, 0}, {0, 0}
			
			for jointType, joint in L:gmatch("<(.-) (.-)/>") do
				if jointType == "JD" or jointType == "JPL" then
					local properties = { ID = getID(), jointType = jointType }
					for attrib, _, value in joint:gmatch("(%w+) ?= ?([\"'])(.-)%2") do
						local value = (value:find(",") and string.split(value, "[^,]+") or value:find(";") and string.split(value, "[^;]+") or value)
						properties[attrib] = value
						
						if attrib == "P1" or attrib == "P2" then
							if attrib == "P1" then
								center = {center[1] + 1, center[2] + value[1], center[3] + value[2]}
							end

							min[1] = math.min(min[1], value[1])
							max[1] = math.max(max[1], value[1])
							
							min[2] = math.min(min[2], value[2])
							max[2] = math.max(max[2], value[2])
						end
					end
				
					joints[#joints + 1] = properties
				end
			end
			
			local X = x and x - math.ceil(center[2] / center[1]) or 0
			local Y = y and y - math.ceil(center[3] / center[1]) or 0

			for i = 1,#joints do
				local obj = joints[i]
				
				local joint = {
					type = 0,
					point1 = string.format("%s,%s",obj.P1[1] + X,obj.P1[2] + Y),
					point2 = string.format("%s,%s",obj.P2[1] + X,obj.P2[2] + Y),
					color = tonumber((obj.c[1] or "FFFFFF"), 16),
					line = tonumber(obj.c[2]) or 2,
					alpha = tonumber(obj.c[3]) or 1,
					foreground = foreground == nil and ((obj.c[4] or "0") == "1") or foreground
				}			
				if obj.jointType == "JPL" then
					joint.type = 2
					joint.point3 = string.format("%s,%s",obj.P3[1] + X,obj.P3[2] + Y)
					joint.point4 = string.format("%s,%s",obj.P4[1] + X,obj.P4[2] + Y)
				end
				
				tfm.exec.addJoint(obj.ID, 0, 0, joint)
			end

			_J[id] = {id = getValue(joints, "ID"), x = x, y = y, size = {min = min, max = max}, func = (f or function() end)}
		end
		return id, #joints
	end

	executeJoint = function()
		for id,drawing in next,table.copy(_J) do
			local X = { drawing.x + drawing.size.min[1], drawing.x + drawing.size.max[1] }
			local Y = { drawing.y + drawing.size.min[2], drawing.y + drawing.size.max[2] }
			for playerName,data in next,tfm.get.room.playerList do
				if math.intersects(data.x, data.y, X[1], Y[1], X[2], Y[2]) then
					drawing.func(playerName,data)
				end
			end
		end
	end
end

eventNewPlayer = function(n)
	for k = 0, 255 do
		for i = 0, 1 do
			system.bindKeyboard(n, k, i == 0, true)
		end
	end
end
table.foreach(tfm.get.room.playerList,eventNewPlayer)

eventKeyboard = function(n,k,d,x,y)
	tfm.get.room.playerList[n].x = x
	tfm.get.room.playerList[n].y = y
end

eventLoop = function()
	executeJoint()
end

tfm.exec.newGame(0)
