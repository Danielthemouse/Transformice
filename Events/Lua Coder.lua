--[[ Title ]]--
title = {
	[1] = "titre_lua_coder",
}

--[[ Translations ]]--
system.translation = {
	en = {
		cancelWord = "Word selected",
		cancelLine = "Line selected",
		cancel = "Cancel",
		submit = "Submit",
		close = "Close",
		allFrag = "You found all the fragments!",
		putInOrder = "Organize all the fragments you found by clicking in the word [cell] or line [row]. Are you able to program for the first time?",
		dataTry = "Wait! Your data is loading...",
		dataFail = "Impossible to load your data :( Try again in the next map.",
		dataSuccess = "Data loaded!",
		findFragments = "Some Lua code fragments were stolen! The thief hid the fragments <B>behind</B> some objects. Find these fragments and organize them in your compiler to win a prize!",
		fragments = "Fragments",
		found = "You found something here!",
		notFound = "Nothing was found here! Try another place and come back later.",
		notDecoration = "Someone has already found something here before. Try somewhere else.",
		wordSameError = "You can't select the same word!",
		wordDifRowError = "You can't select a word from a different line!",
		wordNotWordError = "You can't select this word!",
		lineSameError = "You can't select the same line!",
		submitSuccess = "Your code compiled! You programmed for the first time!",
		submitFail = "Your code didn't compile :( Something is still wrong!",
		thanks = "Event developed by %s and translated by %s",
		roomBarDecoration = "Decorations",
		mapInfo = "%s <G>- <PS>XML made by %s",
	},
	br = {
		cancelWord = "Palavra selecionada",
		cancelLine = "Linha selecionada",
		cancel = "Cancelar",
		submit = "Enviar",
		close = "Fechar",
		allFrag = "Você encontrou todos os fragmentos!",
		putInOrder = "Organize todos os fragmentos que você encontrou clicando na palavra [coluna] ou linha [linha]. Você é capaz de programar pela primeira vez?",
		dataTry = "Aguarde! Seus dados estão carregando...",
		dataFail = "Impossível carregar seus dados :( Tente novamente no próximo mapa.",
		dataSuccess = "Dados carregados!",
		findFragments = "Alguns fragmentos de código Lua foram roubados! O ladrão escondeu os fragmentos <B>atrás</B> de alguns objetos! Encontre esses fragmentos e organize-os em seu compilador para ganhar um prêmio!",
		fragments = "Fragmentos",
		found = "Você encontrou algo aqui!",
		notFound = "Nada foi encontrado aqui! Tente em outro lugar e volte mais tarde.",
		notDecoration = "Alguém já encontrou algo aqui antes. Tente em outro lugar.",
		wordSameError = "Você não pode selecionar a mesma palavra!",
		wordDifRowError = "Você não pode selecionar uma palavra de uma linha diferente!",
		wordNotWordError = "Você não pode selecionar esta palavra!",
		lineSameError = "Você não pode selecionar a mesma linha!",
		submitSuccess = "Seu código compilou! Você programou pela primeira vez!",
		submitFail = "Seu código não compilou :( Algo ainda está errado!",
		thanks = "Evento desenvolvido por %s e traduzido por %s.",
		mapInfo = "%s <G>- <PS>XML feito por %s",
	},
	es = {
		cancelWord = "Palabra seleccionada",
		cancelLine = "Línea seleccionada",
		cancel = "Cancelar",
		submit = "Enviar",
		close = "Cerrar",
		allFrag = "Encontraste todos los fragmentos!",
		putInOrder = "Pon todos los fragmentos en órden clickeando en la palabra [celda] o línea [fila]. ¿Estás listo para programar por primera vez?",
		dataTry = "¡Espera! Tus datos se están cargando...",
		dataFail = "No se pudieron cargar tus datos :( Prueba de nuevo en el siguiente mapa.",
		dataSuccess = "¡Datos cargados!",
		findFragments = "¡Algunos fragmentos del código lua fueron robados! El ladrón escondió los fragmentos <B>detras</B> algunos objetos. ¡Encuentra estos fragmentos y organizalos en tu compilador para ganar un premio!",
		fragments = "Fragmentos",
		found = "¡Encontraste algo aquí!",
		notFound = "¡No encontraste nada aquí! Intenta en otro lugar y vuelve mas tarde.",
		notDecoration = "Alguien ya encontró algo por aquí antes. Intenta en otro lugar.",
		wordSameError = "¡No puedes seleccionar la misma palabra!",
		wordDifRowError = "¡No puedes seleccionar una palabra de otra línea!",
		wordNotWordError = "¡No puedes seleccionar esta palabra!",
		lineSameError = "¡No puedes seleccionar la misma línea!",
		submitSuccess = "¡Tu código ha sido compilado! ¡Has programado por primera vez!",
		submitFail = "Tu código no se ha compilado :( ¡Algo sigue mal!",
		thanks = "Evento hecho por %s y traducido por %s",
		mapInfo = "%s <G>- <PS>XML hecho por %s",
	},
	fr = {
		cancelWord = "Mot sélectionné",
		cancelLine = "Ligne sélectionnée",
		cancel = "Annuler",
		submit = "Soumettre",
		close = "Fermer",
		allFrag = "Tu as trouvé tous les fragments!",
		putInOrder = "Organise tous les fragments que tu as trouvé en cliquant sur le mot [cellule] et la ligne [colonne]. Es-tu capable de programmer pour la première fois ?",
		dataTry = "Attends ! Tes données sont en train de charger...",
		dataFail = "Impossible de charger vos données :( Essayez encore lors de la prochaine map.",
		dataSuccess = "Données chargées !",
		findFragments = "Des fragments du code LUA ont été volés ! Le voleur a caché les fragments <B>derrière</B> certains objets. Trouve ces fragments et organise les dans ton compilateur pour gagner un prix !",
		fragments = "Fragments",
		found = "Tu as trouvé quelque chose ici",
		notFound = "Il n'y a rien ici! Essaye ailleurs et reviens plus tard.",
		notDecoration = "Quelqu'un a déjà trouvé quelque chose ici. Essaye ailleurs.",
		wordSameError = "Tu ne peux pas sélectionner le même mot!",
		wordDifRowError = "Tu ne peux pas sélectionner un mot d'une ligne différente!",
		wordNotWordError = "Tu ne peux pas sélectionner ce mot!",
		lineSameError = "Tu ne peux pas sélectionner la même ligne!",
		submitSuccess = "Tu as compilé ton code! Tu as programmé pour la première fois!",
		submitFail = "Ton code n'a pas été compilé :( Il reste des erreurs!",
		thanks = "Événement développé par %s et traduit par %s",
		roomBarDecoration = "Décorations",
		mapInfo = "%s <G>- <PS>XML fait par %s",
    },
	ar = {
		cancelWord = "الكلمة المحددة",
		cancelLine = "السطر المحدد",
		cancel = "إلغاء",
		submit = "تفعيل",
		close = "أغلق",
		allFrag = "لقد عثرة على جميع القطع!",
		putInOrder = "قم بترتيب جميع القطع التي وجدتها عن طريق الضغط على الكلمة او السطر. هل لديك القدرة على البرمجة لأول مرة؟",
		dataTry = "إنتظر! جاري تحميل بياناتك...",
		dataFail = "من المستحيل تحميل بياناتك :( من فضلك حاول مجددا لاحقا.",
		dataSuccess = "تم تجميل البيانات!",
		findFragments = "لقد تم سرقة بعض الرموز البرمجية للغة البرمجة لوا! وقام السارق بإخفاء الرموز خلف بعض الأشياء. اعثر على الرموز المسروقة و رتبها في جعبتك لتربح الجائزة",
		fragments = "القطع",
		found = "لقد وجدت شيئ هنا!",
		notFound = "لا شيء هنا! حاول في مكان آخر",
		notDecoration = "لقد وجد أحدهم قطعة هنا. حاول في مكان أخر.",
		wordSameError = "لا يمكنك إستعمال الكلمة نفسها!",
		wordDifRowError = "لا يمكنك إختيار كلمة من سطر أخر",
		wordNotWordError = "لا يمكنك إختيار هذه الكلمة!",
		lineSameError = "لا يمكنك إختيار السطر نفسه!",
		submitSuccess = "الرمز صحيح! لقد قمت بالبرمجة لأول مرة!",
		submitFail = "الرمز لم يعمل :( لا يزال هناك خطأ في الرمز!",
		thanks = "مبرمج الحدث %s ومترجمة من قبل %s",
		roomBarDecoration = "زخرفات",
		mapInfo = "%s - XML بواسطة %s",
	},
	pl = {
		cancelWord = "Wybrano słowo",
		cancelLine = "Wybrano wiersz",
		cancel = "Anuluj",
		submit = "Wyślij",
		close = "Zamknij",
		allFrag = "Odnalazłeś/-aś wszystkie fragmenty!",
		putInOrder = "Połóż wszystkie fragmenty, które odnajdziesz, w odpowiedniej kolejności, klikając na słowo [komórka] albo wiersz [rząd]. Jak myślisz, zaprogramujesz coś pierwszy raz?",
		dataTry = "Poczekaj! Twoje dane się ładują...",
		dataFail = "Niemożliwe, żeby załadować twoje dane :( Spróbuj ponownie na następnej mapie.",
		dataSuccess = "Dane załadowane!",
		findFragments = "Części kodu Lua zostały skradzione! Złodziej schował fragmenty <B>za</B> różnymi objektami. Znajdź te fragmenty i uporządkuj je w swoim opracowaniu by wygrać nagrodę!",
		fragments = "Fragmenty",
		found = "Znalazłeś/-aś coś tutaj!",
		notFound = "Tu nic nie ma! Spróbuj w innym miejscu i wróć tu później.",
		notDecoration = "Ktoś wcześniej odnalazł coś tutaj. Spróbuj szukać gdzieś indziej.",
		wordSameError = "Nie możesz wybrać tego samego słowa!",
		wordDifRowError = "Nie możesz wybrać słowa z innego wiersza!",
		wordNotWordError = "Nie możesz wybrać tego słowa!",
		lineSameError = "Nie możesz wybrać tego samego wiersza!",
		submitSuccess = "Twój kod działa! Zaprogramowałeś/-aś coś pierwszy raz!",
		submitFail = "Twój kod nadal nie działa :( Coś ciągle jest źle!",
		thanks = "Event stworzony przez %s i przetłumaczony przez %s",
		roomBarDecoration = "Dekoracje",
		mapInfo = "%s <G>- <PS>XML zrobione przez %s",
	},
	tr = {
		cancelWord = "Sözcük seçildi",
		cancelLine = "Satır seçildi",
		cancel = "Vazgeç",
		submit = "Gönder",
		close = "Kapat",
		allFrag = "Tüm parçaları buldun!",
		putInOrder = "Bulduğunuz tüm parçaları kelimelere ve satırlara tıklayarak düzenleyin. İlk kez programlamak için hazır mısınız?", 
		dataTry = "Bekleyin! Bilgileriniz yükleniyor...",
		dataFail = "Bilgileriniz yüklenemedi :( Lütfen bir sonraki haritada tekrar deneyin.",
		dataSuccess = "Bilgiler yüklendi!",
		findFragments = "Bazı Lua parçaları çalındı! Hırsız parçaları bazı nesnelerin <B>arkasına</B> saklamış. Hediye kazanmak için parçaları bulun ve derleyicinizde hazırlayın!",
		fragments = "Parçalar",
		found = "Burada bir şey buldunuz!",
		notFound = "Burada bir şey bulunamadı! Başka bir yerde deneyin ve sonra geri gelin.",
		notDecoration = "Birisi zaten burada bir şeyler bulmuş. Başka bir yeri deneyin.",
		wordSameError = "Aynı sözcüğü seçemezsiniz!",
		wordDifRowError = "Farklı bir satırdan sözcük seçemezsiniz!",
		wordNotWordError = "Bu sözcüğü seçemezsiniz!",
		lineSameError = "Aynı satırı seçemezsiniz!",
		submitSuccess = "Kodunuz derlendi! İlk kez programlamış oldunuz!",
		submitFail = "Kodunuz derlenmedi :( Bir şeyler hala yanlış!",
		thanks = "Bu etkinlik %s tarafından geliştirilmiştir ve %s tarafından çevrilmiştir.",
		roomBarDecoration = "Dekorasyonlar",
		mapInfo = "%s <G>- <PS>XML %s tarafından yapılmıştır.",
	},
	ro = {
		cancelWord = "Cuvânt selectat",
		cancelLine = "Rând selectat",
		cancel = "Anulare",
		submit = "Înscrie",
		close = "Închide",
		allFrag = "Ai găsit toate fragmentele!",
		putInOrder = "Pune toate fragmentele pe care le-ai găsit în ordine dând click pe cuvânt [celulă] sau linie [rând]. Poți programa pentru prima oară?",
		dataTry = "Așteaptă! Datele tale se încarcă...",
		dataFail = "Datele tale nu pot fi încărcate :( Încearcă din nou în urmatoarea mapă.",
		dataSuccess = "Date încărcate!",
		findFragments = "Some Lua codul fragmente au fost furate! Hoţ ascuns fragmente <B>din spatele</B> unor obiecte. Găsi aceste fragmente şi să le organizaţi în compila dumneavoastră pentru a câştiga un premiu!",
		fragments = "Fragmente",
		found = "Ai găsit ceva aici!",
		notFound = "Nothing was found here! Try another place and come back later.",
		notDecoration = "Cineva a găsit ceva aici înaintea ta. Încearcă în altă parte.",
		wordSameError = "Nu poți selecta același cuvânt!",
		wordDifRowError = "Nu poți selecta un cuvânt de pe alt rând!",
		wordNotWordError = "Nu poți selecta acest cuvânt!",
		lineSameError = "Nu poți selecta același rând!",
		submitSuccess = "Codul tău a fost alcătuit! Ai programat pentru prima oară!",
		submitFail = "Codul tău nu a fost alcătuit :( Ceva este încă greșit!",
		thanks = "Eveniment creat de %s și tradus de %s",
		roomBarDecoration = "Decorations",
		mapInfo = "%s <G>- <PS>XML made by %s",
	},
	de = {
		cancelWord = "Wort ausgewählt",
		cancelLine = "Linie ausgewählt",
		cancel = "Abbrechen",
		submit = "Einreichen",
		close = "Schließen",
		allFrag = "Du hast alle Fragmente gefunden!",
		putInOrder = "Organisiere alle von dir gefundenen Fragmente, indem du in das Wort [Zelle] oder die Linie [Reihe] klickst. Kannst du das erste Mal programmieren?",
		dataTry = "Warte! Deine Daten laden...",
		dataFail = "Es ist unmöglich, deine Daten zu laden :( Bitte versuch es auf der nächsten Map erneut.",
		dataSuccess = "Daten geladen!",
		findFragments = "Einige Lua Code Fragmente wurden gestolen! Der Dieb hat die Fragmente <B>hinter</B> manchen Objekten versteckt.. Finde diese Fragmente und organisiere sie in deinem Compiler, um einen Preis zu gewinnen!",
		fragments = "Fragmente",
		found = "Du hast hier etwas gefunden!",
		notFound = "Hier wurde nichts gefunden! Versuch eine andere Stelle und komm später wieder zurück.",
		notDecoration = "Jemand hat hier vorher schon was gefunden. Versuch es woanders.",
		wordSameError = "Du kannst nicht dasselbe Wort wählen!",
		wordDifRowError = "Du kannst kein Wort einer anderen Zeile auswählen!",
		wordNotWordError = "Du kannst dieses Wort nicht auswählen!",
		lineSameError = "Du kannst nicht die gleiche Zeile auswählen!",
		submitSuccess = "Dein Code ist kompiliert! Du hast das erste Mal programmiert!",
		submitFail = "Dein Code konnte nicht kompiliert werden :( Es ist noch immer etwas falsch!",
		thanks = "Event erstellt von %s und übersetzt von %s",
		roomBarDecoration = "Dekorationen",
		mapInfo = "%s <G>- <PS>XML erstellt von %s",
    },
	ru = {
		cancelWord = "Слово выбрано",
		cancelLine = "Строка выбрана",
		cancel = "Отменить",
		submit = "Отправить",
		close = "Закрыть",
		allFrag = "Вы нашли все фрагменты!",
		putInOrder = "упорядочить все найденные фрагменты нажав на слово [ячейка] или строку [ряд]. Можете ли вы начать программу в первый раз?",
		dataTry = "Подождите! Ваши данные загружаются...",
		dataFail = "Невозможно загрузить ваши данные :( Попробуйте на следующей карте",
		dataSuccess = "Данные загружены!",
		findFragments = "Некоторые Луа-коды были украдены! Вор спрятал фрагменты <B>за</B> определенными предметами. Найдите все фрагменты и расставьте их в правильном порядке!",
		fragments = "Фрагменты",
		found = "Вы что-то нашли!",
		notFound = "Ничего не найдено! Попробуйте поискать в другом месте и возвращайтесь позже.",
		notDecoration = "Кому-то уже удалось найти здесь что-то до вас, попробуйте поискать где-нибудь еще.",
		wordSameError = "Вы не можете выбрать одно и то же слово!",
		wordDifRowError = "Вы не можете выбрать слово из другой строки!",
		submitSuccess = "Код составлен! У вас получилось программировать в первый раз!",
		submitFail = "Вам не удалось составить код :( Что-то всё ещё не верно!",
		thanks = "Ивент разработан %s и переведен %s", 
		roomBarDecoration = "Декорации",
		mapInfo = "%s <G>- <PS>XML сделан %s",
	},
}
system.translation.pt = system.translation.br

system.community = tfm.get.room.community
if not system.translation[system.community] then
	system.community = "en"
end
system.community = system.translation[system.community]

--[[ Main Vars ]]--
currentTime,timeLeft = 0,0
system.mapName = ""
system.mapHeight = 400
system.staff = {
	dev = {"Bolodefchoco"},
	translators = {"Error_404","Sebafrancuz","Tocutoeltuco","Alessyaxd","Sweetphoenix","Miwakiko","Hikariblabla","Miyakogotoku"}
}
for k,v in next,system.staff do
	table.sort(v,function(t1,t2) return t2 > t1 end)
end

--[[ Main Tables ]]--
system.decorations = {
	[0] = {60,30},
	[1] = {140,205},
	[2] = {40,35},
	[3] = {20,25},
	[4] = {55,55},
	[5] = {65,40},
	[6] = {110,155},
	[7] = {85,70},
	[8] = {55,30},
	[9] = {35,20},
	[10] = {25,25},
	[11] = {20,30},
	[12] = {70,25},
	[13] = {55,55},
	[14] = {300,200},
	[15] = {180,65},
	[16] = {40,65},
	[17] = {125,40},
	[18] = {50,50},
	[19] = {80,60},
	[20] = {60,70},
	[21] = {50,40},
	[22] = {75,140},
	[23] = {145,120},
	[24] = {140,75},
	[25] = {60,65},
	[26] = {70,70},
	[27] = {55,160},
	[28] = {70,115},
	[29] = {115,135},
	[30] = {100,90},
	[31] = {30,35},
	[32] = {45,45},
	[33] = {50,50},
	[34] = {800,400},
	[35] = {260,70},
	[36] = {275,75},
	[37] = {35,95},
	[38] = {115,160},
	[39] = {145,120},
	[40] = {75,145},
	[41] = {55,80},
	[42] = {145,210},
	[43] = {145,80},
	[44] = {40,120},
	[45] = {800,120},
	[46] = {40,115},
	[47] = {160,75},
	[48] = {75,60},
	[49] = {190,135},
	[50] = {85,85},
	[51] = {150,215},
	[52] = {80,30},
	[53] = {90,85},
	[54] = {40,60},
	[55] = {20,40},
	[56] = {255,70},
	[57] = {140,225},
	[58] = {85,40},
	[59] = {95,90},
	[60] = {40,40},
	[61] = {120,50},
	[62] = {50,50},
	[63] = {140,70},
	[64] = {140,65},
	[65] = {60,55},
	[66] = {135,155},
	[67] = {60,70},
	[68] = {65,50},
	[69] = {70,80},
	[70] = {50,30},
	[71] = {20,50},
	[72] = {50,55},
	[73] = {25,50},
	[74] = {70,110},
	[75] = {50,90},
	[76] = {115,85},
	[77] = {50,60},
	[78] = {65,45},
	[79] = {60,85},
	[80] = {80,55},
	[81] = {35,20},
	[82] = {50,30},
	[83] = {100,30},
	[84] = {215,50},
	[85] = {55,50},
	[86] = {105,90},
	[87] = {55,65},
	[88] = {70,50},
	[89] = {500,285},
	[90] = {220,130},
	[91] = {30,50},
	[92] = {115,90},
	[93] = {85,70},
	[94] = {115,170},
	[95] = {135,100},
	[96] = {125,90},
	[97] = {60,80},
	[98] = {85,125},
	[99] = {75,90},
	[100] = {35,45},
	[101] = {25,30},
	[102] = {115,110},
	[103] = {65,65},
	[104] = {175,40},
	[105] = {50,65},
	[106] = {35,30},
	[107] = {50,60},
	[108] = {155,48},
	[109] = {125,75},
	[110] = {60,95},
	[111] = {55,75},
	[112] = {95,115},
	[113] = {35,45},
	[114] = {85,130},
	[115] = {60,65},
	[116] = {65,80},
	[117] = {800,400},
	[118] = {55,65},
	[119] = {50,55},
	[120] = {105,100},
	[121] = {55,50},
	[122] = {60,65},
	[123] = {80,50},
	[124] = {55,60},
	[125] = {85,80},
	[126] = {40,25},
	[127] = {35,50},
	[128] = {60,60},
	[129] = {60,60},
	[130] = {35,50},
	[131] = {40,35},
}

system.fragments = {
	[1] = {
		[1] = {"<VI>local","<N>event_title","<N2>=","<CE>\"Lua Coder\""},
		[2] = {"<VI>if","<VI>not","<N>tfm.get.room.playerList[<CE>\"%s\"<N>].hasCheese","<VI>then"},
		[3] = {"<N>tfm.exec.giveCheese","<N2>(<CE>\"%s\"<N2>)"},
		[4] = {"<N>tfm.exec.playerVictory","<N2>(<CE>\"%s\"<N2>)"},
		[5] = "<VI>end",
		[6] = {"<VI>function","<N>eventPlayerWon","<N2>(<N>playerName<N2>)"},
		[7] = {"<N>system.giveEventGift","<N2>(<N>playerName<N2>,<N>event_title<N2>)"},
		[8] = "<VI>end"
	},
	[2] = {
		[1] = {"<VI>local","<N>event_title","<N2>=","<CE>\"Lua Coder\""},
		[2] = {"<VI>if","<N>tfm.get.room.playerList[<CE>\"%s\"<N>].hasCheese","<VI>then"},
		[3] = {"<N>tfm.exec.killPlayer","<N2>(<CE>\"%s\"<N2>)"},
		[4] = "<VI>else",
		[5] = {"<N>tfm.exec.giveCheese","<N2>(<CE>\"%s\"<N2>)"},
		[6] = "<VI>end",
		[7] = {"<VI>function","<N>eventPlayerGetCheese","<N2>(<N>playerName<N2>)"},
		[8] = {"<N>system.giveEventGift","<N2>(<N>playerName<N2>,<N>event_title<N2>)"},
		[9] = "<VI>end"
	},
	[3] = {
		[1] = {"<VI>local","<N>event_title","<N2>=","<CE>\"Lua Coder\""},
		[2] = {"<VI>function","<N>eventPlayerVampire","<N2>(<N>playerName<N2>)"},
		[3] = {"<N>tfm.exec.killPlayer","<N2>(<CE>\"%s\"<N2>)"},
		[4] = {"<N>tfm.exec.respawnPlayer","<N2>(<CE>\"%s\"<N2>)"},
		[5] = "<VI>end",
		[6] = {"<VI>if","<VI>not","<N>tfm.get.room.playerList[<CE>\"%s\"<N>].isVampire","<VI>then"},
		[7] = {"<N>tfm.exec.setVampirePlayer","<N2>(<CE>\"%s\"<N2>)"},
		[8] = "<VI>end",
		[9] = {"<VI>function","<N>eventPlayerRespawn","<N2>(<N>playerName<N2>)"},
		[10] = {"<N>system.giveEventGift","<N2>(<N>playerName<N2>,<N>event_title<N2>)"},
		[11] = "<VI>end"
	},
}
system.fragmentLaunched = {
	[1] = {
		[1] = {{"<VI>local","<N>event_title","<N2>=","<CE>\"Lua Coder\""}},
		[2] = {{"<VI>if","<VI>not","<N>tfm.get.room.playerList[<CE>\"%s\"<N>].hasCheese","<VI>then"},{"<N>tfm.exec.giveCheese","<N2>(<CE>\"%s\"<N2>)"},{"<N>tfm.exec.playerVictory","<N2>(<CE>\"%s\"<N2>)"},"<VI>end"},
		[3] = {{"<VI>function","<N>eventPlayerWon","<N2>(<N>playerName<N2>)"},{"<N>system.giveEventGift","<N2>(<N>playerName<N2>,<N>event_title<N2>)"},"<VI>end"},
	},
	[2] = {
		[1] = {{"<VI>local","<N>event_title","<N2>=","<CE>\"Lua Coder\""}},
		[2] = {{"<VI>if","<N>tfm.get.room.playerList[<CE>\"%s\"<N>].hasCheese","<VI>then"},{"<N>tfm.exec.killPlayer","<N2>(<CE>\"%s\"<N2>)"},"<VI>else",{"<N>tfm.exec.giveCheese","<N2>(<CE>\"%s\"<N2>)"},"<VI>end"},
		[3] = {{"<VI>function","<N>eventPlayerGetCheese","<N2>(<N>playerName<N2>)"},{"<N>system.giveEventGift","<N2>(<N>playerName<N2>,<N>event_title<N2>)"},"<VI>end"},
	},
	[3] = {
		[1] = {{"<VI>local","<N>event_title","<N2>=","<CE>\"Lua Coder\""}},
		[2] = {{"<VI>function","<N>eventPlayerVampire","<N2>(<N>playerName<N2>)"},{"<N>tfm.exec.killPlayer","<N2>(<CE>\"%s\"<N2>)"},{"<N>tfm.exec.respawnPlayer","<N2>(<CE>\"%s\"<N2>)"},"<VI>end"},
		[3] = {{"<VI>if","<VI>not","<N>tfm.get.room.playerList[<CE>\"%s\"<N>].isVampire","<VI>then"},{"<N>tfm.exec.setVampirePlayer","<N2>(<CE>\"%s\"<N2>)"},"<VI>end",},
		[4] = {{"<VI>function","<N>eventPlayerRespawn","<N2>(<N>playerName<N2>)"},{"<N>system.giveEventGift","<N2>(<N>playerName<N2>,<N>event_title<N2>)"},"<VI>end"},
	},
}
system.fragmentFunction = {
	[1] = function(n)
		if not tfm.get.room.playerList[n].hasCheese then
			tfm.exec.giveCheese(n)
			tfm.exec.playerVictory(n)
		end
	end,
	[2] = function(n)
		if tfm.get.room.playerList[n].hasCheese then
			tfm.exec.killPlayer(n)
		else
			tfm.exec.giveCheese(n)
		end
	end,
	[3] = function(n)
		if not tfm.get.room.playerList[n].isVampire then
			tfm.exec.setVampirePlayer(n)
		end
		tfm.exec.killPlayer(n)
		tfm.exec.respawnPlayer(n)
	end
}

--[[ Main Functions ]]--
	--[[ Data ]]--
serialization = function(x)
	if type(x) == "table" then
		local t = x
		local str = ""
		for index,value in next,t do
			local prefix,tbOption = (type(value)=="string" and "_@" or type(value)=="boolean" and "_!" or type(value)=="number" and "_#" or type(value)=="table" and "_%" or ""),(type(value)~="table" and tostring(value) or "+&"..serialization(value):gsub(";","?").."&-")
			str = str .. ':' .. tostring(index) .. prefix .. tbOption .. ";"
		end
		return str
	elseif type(x) == "string" then
		local s = x
		local list = {}
		for str in s:gmatch("(.-);") do
			local varName,valueType,value = str:match(':(.-)_(%p)(.+)')
			if varName~=nil then
				varName = tonumber(varName) or varName
				if valueType == "@" then
					list[varName] = tostring(value)
				elseif valueType == "!" then
					list[varName] = value=="true"
				elseif valueType == "#" then
					list[varName] = tonumber(value)
				elseif valueType == "%" then
					list[varName] = serialization(value:gsub("+&",""):gsub("&-",""):gsub("%?",";"))
				end	
			end
		end
		return list
	end
end

	--[[ Library ]]--
os.normalizedTime = function(time)
	return math.floor(time) + ((time - math.floor(time)) >= .5 and .5 or 0)
end
table.concat = function(list,sep,f)
	local txt = ""
	sep = sep or ""
	for k,v in next,list do
		txt = txt .. (f and f(k,v) or v) .. sep
	end
	return txt:sub(1,-1-#sep)
end
table.random=function(t)
	return (type(t)=="table" and t[math.random(#t)] or math.random())
end
table.turnTable = function(x)
	return (type(x)=="table" and x or {x})
end

	--[[ System ]]--
system.descompileFragments = function(n)
	local fragments = {}
	for k,v in next,system.fragments[info[n].db.luaCoderFragment] do
		for i,j in next,table.turnTable(v) do
			fragments[#fragments + 1] = j
		end
	end
	return fragments
end
system.displayRunningCode = function(n)
	local subFragmentedCode = system.fragmentPerRow(n)
	info[n].compiler.code = {table.concat(subFragmentedCode,"\n"):gsub("<.->",""):gsub("%%s",n),false}
	
	local list = "<BL>"
	for line = 1,#subFragmentedCode do
		list = list .. line .. "\n"
	end
	info[n].compiler.codeLines = list
	
	system.triggerCompiler(n,true)
end
system.fragmentPerRow = function(n)
	local subTable = {}
	for k,v in next,info[n].db.luaCoderCurrentFragments do
		subTable[k] = table.concat(table.turnTable(v)," ")
	end
	return subTable
end	
system.messFragments = function(n)
	local mess = function(t)
		local messedTable = {}
		for i = 1,#t do
			table.insert(messedTable,math.random(#messedTable),t[i])
		end
		return messedTable
	end
	info[n].db.luaCoderCurrentFragments = {}
	info[n].db.luaCoderCurrentFragments = mess(system.fragments[info[n].db.luaCoderFragment])

	for k,v in next,info[n].db.luaCoderCurrentFragments do
		if type(v) == "table" then
			info[n].db.luaCoderCurrentFragments[k] = mess(v)
		end
	end
	
	system.savePlayerData(n,serialization(info[n].db))
end
system.missedFragments = function(n,fragments)
	for k,v in next,fragments do
		local found = false
		for i,j in next,info[n].db.luaCoderCurrentFragments do
			if v == j then
				found = true
				break
			end
		end
		if not found then
			info[n].missedFragments[#info[n].missedFragments + 1] = v
		end
	end
end
system.resetPlayer = function(n)
	local newCodeFragments
	repeat
		newCodeFragments = math.random(#system.fragments)
	until newCodeFragments ~= info[n].db.luaCoderFragment
	info[n].db.luaCoderFragment = newCodeFragments
	
	info[n].db.luaCoderCurrentFragments = {}
	info[n].db.luaCoderTriggerCompiler = false
	
	info[n].notThisRound = true
	
	system.savePlayerData(n,serialization(info[n].db))
end
system.showCancelCallback = function(n)
	if #info[n].compiler.cancel > 0 then
		local href = "<R><font size='15'><a href='event:compiler.cancel.%s'>■</a></font>"
		local formats = {
			[1] = system.community.cancelWord .."\n\t<N> - %s <N>-",
			[2] = system.community.cancelLine .." <N>[%s<N>]"
		}

		local text = table.concat(info[n].compiler.cancel,"\n",function(k,v)
			local id = v[1]
			local callback = (id == 1 and "word" or "line")
			v[2] = tostring(v[2])
			return string.format(href .. " " .. formats[id],callback,(#v[2] > 12 and v[2]:sub(1,12).."<BV>...</BV>" or v[2]))
		end)
		
		ui.addTextArea(7,"<R><font size='13'>"..system.community.cancel.."\n<font size='11'>\n" .. text,n,10,50,140,130,0x272834,1,1,true)
	end
end
system.triggerCompiler = function(n,done)
	if info[n].compiler.code[2] then
		system.updateCompilerCode(n)
	end

	local range = system.mapHeight - 400
	ui.addTextArea(0,"",n,180,range + 50,440,322,0x272834,1,1,false)
	ui.addTextArea(1,info[n].compiler.codeLines,n,184,range + 55,25,280,1,1,0,false)
	ui.addTextArea(2,"",n,214,range + 349,400,15,0x5F8093,0x5F8093,1,false)
	ui.addTextArea(3,"",n,215,range + 351,400,15,1,1,1,false)
	ui.addTextArea(4,"",n,215,range + 350,400,15,0x3C5064,0x3C5064,1,false)
	ui.addTextArea(5,"<p align='center'>" .. (done and "<a href='event:compiler.close'>" .. system.community.close or "<a href='event:compiler.submit'>" .. system.community.submit),n,374,range + 350,100,20,0x324650,1,0,false)
	ui.addTextArea(6,info[n].compiler.code[1],n,215,range + 55,400,280,-1,0x425b68,1,false)
end
system.updateCompilerCode = function(n)
	info[n].compiler.code[2] = false
	
	local code = ""
	for k,v in next,info[n].db.luaCoderCurrentFragments do
		code = code .. table.concat(table.turnTable(v)," ",function(i,j)
			return string.format("<a href='event:compiler.fragment.%s.%s'>%s</a>",k,i,j:format(n))
		end) .. "\n"
	end
	
	info[n].compiler.code[1] = code
end
system.verifyTrigger = function(n)
	if #info[n].missedFragments == 0 then
		if not info[n].db.luaCoderTriggerCompiler then
			info[n].db.luaCoderTriggerCompiler = true
			system.savePlayerData(n,serialization(info[n].db))
			tfm.exec.chatMessage("<CE>[•] " .. system.community.allFrag,n)
			tfm.exec.chatMessage("<CE>[•] " .. system.community.putInOrder,n)
		end
	end
	
	if info[n].db.luaCoderTriggerCompiler then
		system.messFragments(n)
		
		local list = "<BL>"
		for line = 1,#info[n].db.luaCoderCurrentFragments + 10 do
			if line > #info[n].db.luaCoderCurrentFragments then
				list = list .. line .. "\n"
			else
				list = list .. string.format("<a href='event:compiler.line.%s'>%s</a>\n",line,line)
			end
		end
		info[n].compiler.codeLines = list
		
		system.triggerCompiler(n)
	end
	
	return info[n].db.luaCoderTriggerCompiler
end

	--[[ Misc ]]--
updateDecorationsRoomBar = function()
	ui.setMapName(system.mapName .. "   <G>|   <N>Decorations : <V>" .. (function()
		local decorations = 0
		for k,v in next,system.mapDecorations do
			if v.available then
				decorations = decorations + 1
			end
		end
		if decorations < 1 and timeLeft > 20 then
			tfm.exec.setGameTime(20)
		end
		return decorations
	end)())
end

	--[[ Remake for dev functions ]]--
system.isTesting = tfm.get.room.name:byte(2) == 3
if system.isTesting then
	BOLODEFCHOCO_DATA = {
		PLAYER_DATA = {
			Bolodefchoco = ":luaCoderTriggerCompiler_!true;:luaCoderCurrentFragments_%+&:1_@<VI>end?:2_%+&:1_@<N2>(<CE>\"%s\"<N2>)?:2_@<N>tfm.exec.killPlayer?&-?:3_%+&:1_@<VI>not?:2_@<N>tfm.get.room.playerList[<CE>\"%s\"<N>].isVampire?:3_@<VI>then?:4_@<VI>if?&-?:4_@<VI>end?:5_%+&:1_@<N2>(<CE>\"%s\"<N2>)?:2_@<N>tfm.exec.setVampirePlayer?&-?:6_%+&:1_@<N2>(<N>playerName<N2>,<N>event_title<N2>)?:2_@<N>system.giveEventGift?&-?:7_%+&:1_@<N>eventPlayerRespawn?:2_@<N2>(<N>playerName<N2>)?:3_@<VI>function?&-?:8_%+&:1_@<N2>(<CE>\"%s\"<N2>)?:2_@<N>tfm.exec.respawnPlayer?&-?:9_@<VI>end?:10_%+&:1_@<N>eventPlayerVampire?:2_@<N2>(<N>playerName<N2>)?:3_@<VI>function?&-?:11_%+&:1_@<N2>=?:2_@<N>event_title?:3_@<CE>\"Lua Coder\"?:4_@<VI>local?&-?&-;:luaCoderFragment_#3;:luaCoder_!false;",
		}
	}
	system.savePlayerData = function(n,d)
		BOLODEFCHOCO_DATA.PLAYER_DATA[n] = tostring(d)
		return true
	end
	system.loadPlayerData = function(n)
		if _G["eventPlayerDataLoaded"] then
			eventPlayerDataLoaded(n,BOLODEFCHOCO_DATA.PLAYER_DATA[n] or "")
			return true
		else
			return false
		end
	end

	tfm.exec.chatMessage = function(t,n)
		if n then
			print(string.format("> [%s] %s",n,t))
		else
			print(t)
		end
	end
end
system.finalize = function()
	if system.isTesting then
		local done = 0
		for k,v in next,BOLODEFCHOCO_DATA.PLAYER_DATA do
			print(k .. " = " .. tostring(v:gsub("<","&lt;"):gsub('"','\\"')))
			done = done + 1
			if done == #BOLODEFCHOCO_DATA.PLAYER_DATA then
				system.exit()
			end
		end
	else
		system.exit()
	end
end

--[[ Collect decorations + playerData ]]--
eventPlayerDataLoading = function(n,tentative)
	if tentative < 4 then
		local loadingData = system.loadPlayerData(n)
		if loadingData then
			tfm.exec.chatMessage("<G>" .. system.community.dataTry,n)
		else
			eventPlayerDataLoading(n,tentative + 1)
		end
	else
		tfm.exec.killPlayer(n)
		tfm.exec.chatMessage("<G>" .. system.community.dataFail,n)
	end
end
eventPlayerDataLoaded = function(n,data)
	if data ~= "" and data:find(":luaCoder") then
		info[n].db = serialization(data)
	else
		system.savePlayerData(n,serialization(info[n].db))
	end
	
	tfm.exec.chatMessage("<G>" .. system.community.dataSuccess,n)
	
	local descompiled = system.descompileFragments(n)
	system.missedFragments(n,descompiled)
	
	local done = system.verifyTrigger(n)
	if not done then
		tfm.exec.chatMessage("<CE>[•] ".. system.community.findFragments,n)
		info[n].pieces = {(#descompiled - #info[n].missedFragments),#descompiled}
		tfm.exec.chatMessage("<CE>[•] ".. system.community.fragments .." : " .. info[n].pieces[1] .. "/" .. info[n].pieces[2],n)
		system.bindKeyboard(n,3,true,true)
	end
	
	info[n].dataLoaded = true
end

info = {}
system.mapDecorations = {}
eventNewGame = function()
	tfm.get.room.xmlMapInfo.xml:gsub("<P (.-)/>",function(attributes)
		local height = attributes:match("H=\"(%d+)\"")
		system.mapHeight = height and tonumber(height) or 400
	end,1)

	tfm.exec.setGameTime(3.5 * 60)

	system.mapDecorations = {}
	local xml = tfm.get.room.xmlMapInfo.xml:match("<D>(.*)</D>")
	if xml then
		xml:gsub("<P (.-)/>",function(decoration)
			local foo,isForeground = decoration:match("P=([\"'])(%d+),%d+%1")
			if isForeground == "1" then
				local info = {}
				for k,v in next,{"X","T","Y"} do
					local foo,value = decoration:match(v .. "=([\"'])(%d+)%1")
					info[v] = tonumber(value)
				end
				system.mapDecorations[#system.mapDecorations + 1] = {
					available = true,
					X = info.X,
					Y = info.Y,
					axis = system.decorations[info.T]
				}
				system.mapDecorations[#system.mapDecorations].range = system.mapDecorations[#system.mapDecorations].axis[1]/2
			end
		end)
	end

	tfm.exec.chatMessage("<CE>[•] <PS>" .. system.community.mapInfo:format("@<BV>" .. system.xml[2] .. "</BV>","<PT>" .. system.xml[1]),n)
	for k,v in next,tfm.get.room.playerList do
		info[k] = {
			piece = {
				duck = table.random({9,8,7,1,7,7,9,8,9,7,5}) * 2,
				timer = 0,
			},
			missedFragments = {},
			pieces = {},
			db = {
				luaCoderFragment = math.random(#system.fragments),
				luaCoderCurrentFragments = {},
				luaCoderTriggerCompiler = false,
				luaCoder = false,
			},
			compiler = {
				code = {"",true}, -- Code, can update
				codeLines = "",
				selected = {},
				newLine = 0,
				cancel = {},
			},
			dataLoaded = false,
			notThisRound = false,
		}
		eventPlayerDataLoading(k,1)
	end

	system.mapName = "<J>#" .. table.random({"Bolodefchoco","Lua event",system.xml[2]}).." <G>- @"..table.random({666,404,801,os.date("%Y"),0,1})
	updateDecorationsRoomBar()
	system.xml[3] = ""
end

--[[ Keyboard ]]--
eventKeyboard = function(n,k,d,x,y)
	if system.xml[3] == "" then
		if info[n].dataLoaded and currentTime > 3 and timeLeft > 5 then
			if k == 3 then
				if not info[n].db.luaCoderTriggerCompiler and not info[n].notThisRound then
					if os.time() > info[n].piece.timer then
						info[n].piece.timer = os.time() + 700
						info[n].piece.duck = table.random({9,8,7,1,7,7,9,8,9,7,5}) * 2
					end
					
					for k,v in next,system.mapDecorations do
						if x > (v.X - v.range - 10) and x < (v.X + v.range + 10) then
							if y < (v.Y + 10) and y > (v.Y - v.range - 10) then
								info[n].piece.timer = os.time() + 700
								info[n].piece.duck = info[n].piece.duck - 1

								if info[n].piece.duck <= 0 then
									info[n].piece = {
										duck = table.random({9,8,7,1,7,7,9,8,9,7,5}) * 2,
										timer = 0
									}
									
									if v.available then
										if math.random(15) < 8 then
											local fragmentIndex = math.random(#info[n].missedFragments)
											local newFragment = info[n].missedFragments[fragmentIndex]
											table.remove(info[n].missedFragments,fragmentIndex)
											local missedFragments = #info[n].missedFragments

											info[n].db.luaCoderCurrentFragments[#info[n].db.luaCoderCurrentFragments + 1] = newFragment
											tfm.exec.chatMessage("<CE>[•] " .. system.community.found,n)

											info[n].pieces[1] = info[n].pieces[1] + 1
											tfm.exec.chatMessage("<CE>[•] ".. system.community.fragments .." : " .. info[n].pieces[1] .. "/" .. info[n].pieces[2],n)

											system.verifyTrigger(n)
											v.available = false
											
											system.savePlayerData(n,serialization(info[n].db))
											updateDecorationsRoomBar()
										else
											tfm.exec.chatMessage("<BV>[•] " .. system.community.notFound,n)
										end
									else
										tfm.exec.chatMessage("<R>[•] " .. system.community.notDecoration,n)
									end
								end
								break
							end
						end
					end
				end
			end
		end
	end
end

--[[ Callbacks ]]--
eventTextAreaCallback = function(i,n,c)
	local p = {}
	for word in c:gmatch("[^%.]+") do
		p[#p + 1] = word
	end
	if p[1] == "compiler" then
		if p[2] == "fragment" then
			p[3] = tonumber(p[3])
			p[4] = tonumber(p[4])
			
			if #info[n].compiler.selected > 0 then -- Second selection
				if info[n].db.luaCoderCurrentFragments[p[3]] and info[n].db.luaCoderCurrentFragments[p[3]][p[4]] then
					if info[n].db.luaCoderCurrentFragments[info[n].compiler.selected[1]][info[n].compiler.selected[2]] then
						if info[n].compiler.selected[1] == p[3] then
							if info[n].compiler.selected[2] ~= p[4] then
								info[n].db.luaCoderCurrentFragments[p[3]][p[4]],info[n].db.luaCoderCurrentFragments[info[n].compiler.selected[1]][info[n].compiler.selected[2]] = info[n].db.luaCoderCurrentFragments[info[n].compiler.selected[1]][info[n].compiler.selected[2]],info[n].db.luaCoderCurrentFragments[p[3]][p[4]]

								info[n].compiler.selected = {}

								info[n].compiler.code[2] = true
								system.triggerCompiler(n)

								ui.removeTextArea(7,n)
								info[n].compiler.cancel = {}
								
								system.savePlayerData(n,serialization(info[n].db))
							else
								tfm.exec.chatMessage("<R>[•] " .. system.community.wordSameError,n)
							end
						else
							tfm.exec.chatMessage("<R>[•] " .. system.community.wordDifRowError,n)
						end
					end
				else
					tfm.exec.chatMessage("<R>[•] " .. system.community.wordNotWordError,n)
				end
			else -- First selection
				if info[n].db.luaCoderCurrentFragments[p[3]] and info[n].db.luaCoderCurrentFragments[p[3]][p[4]] then
					info[n].compiler.selected = {p[3],p[4]}

					info[n].compiler.cancel[#info[n].compiler.cancel + 1] = {1,info[n].db.luaCoderCurrentFragments[p[3]][p[4]]}
					system.showCancelCallback(n)
				else
					tfm.exec.chatMessage("<R>[•] " .. system.community.wordNotWordError,n)
				end
			end
		elseif p[2] == "line" then
			eventTextAreaCallback(i,n,"compiler.cancel.word")
			p[3] = tonumber(p[3])
			
			if info[n].compiler.newLine == 0 then -- First selection
				info[n].compiler.newLine = p[3]

				info[n].compiler.cancel[#info[n].compiler.cancel + 1] = {2,info[n].compiler.newLine}
				system.showCancelCallback(n)
			else -- Second selection
				if p[3] ~= info[n].compiler.newLine then
					info[n].db.luaCoderCurrentFragments[p[3]],info[n].db.luaCoderCurrentFragments[info[n].compiler.newLine] = info[n].db.luaCoderCurrentFragments[info[n].compiler.newLine],info[n].db.luaCoderCurrentFragments[p[3]]
					info[n].compiler.newLine = 0

					info[n].compiler.code[2] = true
					system.triggerCompiler(n)

					ui.removeTextArea(7,n)
					info[n].compiler.cancel = {}
					
					system.savePlayerData(n,serialization(info[n].db))
				else
					tfm.exec.chatMessage("<R>[•] " .. system.community.lineSameError,n)
				end
			end
		elseif p[2] == "cancel" then
			if p[3] == "word" then
				info[n].compiler.selected = {}
				ui.removeTextArea(7,n)
			elseif p[3] == "line" then
				info[n].compiler.newLine = 0
				ui.removeTextArea(7,n)
			end
			info[n].compiler.cancel = {}
		elseif p[2] == "close" then
			for i = 0,7 do
				ui.removeTextArea(i,n)
			end
		elseif p[2] == "submit" then
			local Error = false
			local subFragmentedCode = system.fragmentPerRow(n)
			
			for k,v in next,system.fragmentLaunched[info[n].db.luaCoderFragment] do
				local codeBlock,id = {},0
				
				for i,j in next,v do
					codeBlock[#codeBlock + 1] = table.concat(table.turnTable(j)," ")
				end
				
				for i,j in next,subFragmentedCode do
					if j == codeBlock[1] then
						id = i
						break
					end
				end
				
				for i = 1,#codeBlock do
					if codeBlock[i] ~= subFragmentedCode[id + (i - 1)] then
						Error = true
						break
					end
				end
			end

			if not Error then
				system.fragmentFunction[info[n].db.luaCoderFragment](n)
				
				tfm.exec.chatMessage("<CE>[•] " .. system.community.submitSuccess,n)
				tfm.exec.chatMessage("<G>[^_^] <PT>" .. system.community.thanks:format("<CE>" .. table.concat(system.staff.dev,"<PT>, <CE>") .. "<PT>","<BV>" .. table.concat(system.staff.translators,"<PT>, <BV>") .. "<PT>"),n)
				
				if not info[n].db.luaCoder then
					info[n].db.luaCoder = true
					system.giveEventGift(n,title[1])
				end
				
				ui.removeTextArea(7,n)
				
				system.displayRunningCode(n)
				system.resetPlayer(n)
			else
				tfm.exec.chatMessage("<R>[•] " .. system.community.submitFail,n)
			end
		end
	end
end

--[[ Time ]]--
eventLoop = function(currentTime,timeLeft)
	_G.currentTime,_G.timeLeft = os.normalizedTime(currentTime/1000),os.normalizedTime(timeLeft/1000)
	if _G.timeLeft <= 1 then
		for k,v in next,tfm.get.room.playerList do
			system.savePlayerData(k,serialization(info[k].db))
		end
		system.finalize()
	end
end

--[[ Execute ]]--
eventPlayerLeft = function(n)
	system.savePlayerData(n,serialization(info[n].db))
end

for i,f in next,{"AutoShaman","AfkDeath","MortCommand","AutoTimeLeft","PhysicalConsumables","DebugCommand"} do
	tfm.exec["disable"..f]()
end

system.maps = {
	[1] = {"Bolodefchoco","Death's Mansion",'<C><P F="4" DS="m;55,545,175,545,295,545,415,545,535,545" defilante="0,0,0,1" L="2000" H="600" /><Z><S><S P="0,0,0.3,0.2,-20,0,0,0" L="320" o="272B29" H="130" c="4" Y="92" T="12" X="1883" /><S P="0,0,0.3,0.2,-35,0,0,0" L="240" o="272B29" H="150" c="4" Y="70" T="12" X="1870" /><S P="0,0,0.3,0.2,-70,0,0,0" L="150" o="272B29" H="180" c="4" Y="57" T="12" X="1980" /><S P="0,0,0.3,0.2,-90,0,0,0" L="150" o="272B29" H="180" c="4" Y="121" T="12" X="1966" /><S P="0,0,0.3,0.2,-40,0,0,0" L="100" o="272B29" H="80" c="4" Y="148" T="12" X="1699" /><S P="0,0,0.3,0.2,0,0,0,0" L="380" o="272B29" H="90" c="4" Y="146" T="12" X="1871" /><S P="0,0,0.3,0.2,0,0,0,0" L="130" o="272B29" H="50" c="4" Y="180" T="12" X="1701" /><S P="0,0,0.3,0.2,0,0,0,0" L="80" o="151515" X="1603" c="4" N="" Y="139" T="12" H="15" /><S P="0,0,0.3,0.2,-80,0,0,0" L="80" o="151515" X="1633" c="4" N="" Y="173" T="12" H="15" /><S P="0,0,0.3,0.2,-20,0,0,0" L="80" o="151515" X="1803" c="4" N="" Y="405" T="12" H="15" /><S L="20" o="1d1d1d" X="10" H="400" Y="400" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="700" o="1d1d1d" H="20" X="350" Y="210" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="400" o="1d1d1d" H="15" X="1570" Y="418" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="100" o="1d1d1d" H="150" X="796" Y="413" T="12" P="0,0,0.3,0.2,-40,0,0,0" /><S L="2025" o="1d1d1d" H="20" X="1022" Y="591" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="100" o="1d1d1d" H="280" X="740" Y="340" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="300" o="1d1d1d" H="350" X="1000" Y="627" T="12" P="0,0,0.3,0.2,60,0,0,0" /><S L="300" o="1d1d1d" H="300" X="1226" Y="560" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="113" H="63" X="1826" Y="545" T="12" P="0,0,.3,.8,0,0,0,0" /><S L="120" o="1d1d1d" H="15" X="1884" Y="354" T="12" P="0,0,0.3,0.2,-40,0,0,0" /><S L="75" o="1d1d1d" H="15" X="1963" Y="317" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="400" o="1d1d1d" H="20" X="1105" Y="294" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="250" o="1d1d1d" H="20" X="1417" Y="252" T="12" P="0,0,0.3,0.2,-20,0,0,0" /><S L="530" o="1d1d1d" H="20" X="1796" N="" Y="200" T="12" P="0,0,0.3,0.2,-2,0,0,0" /><S L="94" H="73" X="1154" Y="247" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="350" o="1d1d1d" H="20" X="1782" N="" Y="40" T="12" P="0,0,2,0.2,-35,0,0,0" /><S L="30" o="1d1d1d" H="29" X="1733" Y="62" T="12" P="0,0,0.3,0.2,6,0,0,0" /><S L="84" H="22" X="1966" Y="169" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="43" H="10" X="1791" Y="159" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="200" o="1d1d1d" H="20" X="2007" Y="-17" T="12" P="0,0,0.3,0.2,25,0,0,0" /><S L="30" o="1d1d1d" H="25" X="1279" N="" Y="78" T="12" P="0,0,0.3,0.2,-30,0,0,0" /><S L="180" o="1d1d1d" H="20" X="2070" Y="100" T="12" P="0,0,0.3,0.2,-78,0,0,0" /><S L="30" o="1d1d1d" H="29" X="1299" N="" Y="76" T="12" P="0,0,0.3,0.2,6,0,0,0" /><S L="530" o="1d1d1d" H="20" X="1307" Y="93" T="12" P="0,0,0.3,0.2,10,0,0,0" /><S L="30" o="1d1d1d" H="29" X="1311" N="" Y="84" T="12" P="0,0,0.3,0.2,-34,0,0,0" /><S L="77" H="20" X="1373" Y="181" T="12" P="0,0,1,0.2,10,0,0,0" /><S L="80" o="1d1d1d" H="20" X="528" Y="171" T="12" P="0,0,0.3,0.2,-78,0,0,0" /><S L="530" o="1d1d1d" H="20" X="790" Y="93" T="12" P="0,0,0.3,0.2,-10,0,0,0" /><S L="140" o="1d1d1d" H="20" X="2023" Y="258" T="12" P="0,0,0.3,0.2,-65,0,0,0" /><S L="140" o="1d1d1d" H="20" X="2019" Y="381" T="12" P="0,0,0.3,0.2,75,0,0,0" /><S L="140" o="1d1d1d" H="20" X="2031" Y="514" T="12" P="0,0,0.3,0.2,95,0,0,0" /><S L="530" o="1d1d1d" H="30" X="1307" N="" Y="97" T="12" P="0,0,2,0.2,10,0,0,0" /><S L="530" o="1d1d1d" H="40" X="792" Y="103" T="12" P="0,0,0.3,0.2,-10,0,0,0" /><S L="280" o="1d1d1d" H="30" X="1063" Y="80" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="500" o="1d1d1d" H="20" X="1072" Y="94" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="530" o="1d1d1d" H="20" X="1072" Y="111" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="77" H="20" X="1760" Y="291" T="12" P="0,0,1,0.2,10,0,0,0" /><S P="0,0,0.3,0.2,-65,0,0,0" L="150" o="6A7495" H="100" c="4" Y="263" T="12" X="2086" /><S P="0,0,0.3,0.2,75,0,0,0" L="150" o="6A7495" H="100" c="4" Y="369" T="12" X="2076" /><S P="0,0,0.3,0.2,0,0,0,0" L="800" o="6A7495" H="500" c="4" Y="851" T="12" X="1103" /><S P="0,0,0.3,0.2,0,0,0,0" L="800" o="6A7495" H="500" c="4" Y="402" T="12" X="-400" /><S P="0,0,0.3,0.2,95,0,0,0" L="150" o="6A7495" H="100" c="4" Y="585" T="12" X="2085" /></S><D><P C="1c1e29,1c1e29" Y="133" T="117" X="863" P="0,0" /><P C="1c1e29,1c1e29" Y="133" T="117" X="526" P="0,0" /><P C="1c1e29,1c1e29" Y="114" T="117" X="651" P="0,0" /><P C="1c1e29,1c1e29" Y="201" T="117" X="-16" P="0,0" /><P C="1c1e29,1c1e29" Y="201" T="117" X="780" P="0,0" /><P C="1c1e29,1c1e29" Y="201" T="117" X="1241" P="0,0" /><P C="413653" Y="585" T="19" P="0,0" X="55" /><P C="413653" Y="585" T="19" X="175" P="0,0" /><P C="413653" Y="585" T="19" P="0,0" X="295" /><P C="413653" Y="585" T="19" X="415" P="0,0" /><P C="413653" Y="585" T="19" P="0,0" X="535" /><P C="cdc5bc,623b2a" Y="582" T="105" X="1434" P="0,0" /><P C="623b2a" Y="589" T="104" X="1507" P="0,0" /><P C="18585,c26900,10a61d,a3468e" Y="548" T="93" X="1517" P="1,1" /><P C="623b2a,a3468e" Y="585" T="94" X="1955" P="1,0" /><P C="593423" Y="584" T="95" X="1828" P="0,0" /><P C="850148" Y="512" T="100" X="1862" P="1,0" /><P C="2f2c2b,151414" Y="310" T="103" X="1962" P="1,0" /><P C="4d2e0f" Y="412" T="99" X="1458" P="1,0" /><P X="1555" Y="291" T="112" P="0,0" /><P C="1f1d1d" Y="287" T="15" X="1011" P="0,0" /><P C="222120" Y="288" T="96" X="1150" P="0,0" /><P C="443f39" Y="212" T="130" X="1124" P="1,0" /><P X="1747" Y="50" T="106" P="1,1" /><P C="1d152b" Y="191" T="120" X="1967" P="1,0" /><P X="1791" Y="154" T="121" P="1,0" /><P C="e8e9eb,31a7cf" Y="184" T="119" X="1885" P="1,0" /><P C="48230c" Y="89" T="20" X="1295" P="1,0" /><P C="dc7c3e,6a1925,2e3031,431d72" Y="102" T="102" X="1373" P="1,0" /><P X="532" Y="155" T="107" P="1,0" /><P X="637" Y="167" T="43" P="0,0" /><P X="694" Y="188" T="43" P="1,0" /><P X="750" Y="174" T="43" P="0,0" /><P X="18" Y="200" T="46" P="0,0" /><P X="58" Y="200" T="46" P="1,0" /><P X="98" Y="200" T="46" P="0,0" /><P X="138" Y="200" T="46" P="1,0" /><P X="178" Y="200" T="46" P="0,0" /><P X="218" Y="200" T="46" P="1,0" /><P X="258" Y="200" T="46" P="0,0" /><P X="298" Y="200" T="46" P="1,0" /><P X="87" Y="212" T="47" P="0,0" /><P X="225" Y="216" T="47" P="0,0" /><P X="410" Y="206" T="42" P="0,0" /><P X="440" Y="201" T="48" P="1,0" /><P X="497" Y="203" T="40" P="1,0" /><P C="6f4b8e" Y="79" T="85" X="872" P="1,0" /><P X="606" Y="248" T="108" P="0,0" /><P C="dc7c3e,6a1925,2e3031,431d72" Y="210" T="102" X="1760" P="1,0" /><P C="5b5651,-1" Y="358" T="98" X="804" P="1,1" /></D><O /></Z></C>'},
	[2] = {"Bolodefchoco","Nowhere",'<C><P F="2" L="2000" DS="m;55,315,175,315,295,315,415,315,535,315" /><Z><S><S L="150" X="872" H="15" Y="345" T="2" P="0,0,0,1.2,-40,0,0,0" /><S L="800" X="420" H="20" Y="390" T="6" P="0,0,0.3,0.2,0,0,0,0" /><S L="400" H="20" X="10" Y="200" T="6" P="0,0,0.3,0.2,90,0,0,0" /><S L="700" X="350" H="20" Y="10" T="6" P="0,0,0.3,0.2,0,0,0,0" /><S L="300" X="700" H="20" Y="150" T="6" P="0,0,0.3,0.2,-90,0,0,0" /><S L="800" H="50" X="1321" N="" Y="294" T="6" P="0,0,0.3,0.2,0,0,0,0" /><S L="800" X="1600" H="50" Y="145" T="6" P="0,0,0.3,0.2,0,0,0,0" /><S L="200" H="50" X="810" Y="171" T="6" P="0,0,0.3,0.2,0,0,0,0" /><S L="800" H="20" X="1381" Y="390" T="6" P="0,0,0.3,0.2,0,0,0,0" /></S><D><P C="bfb51e" Y="385" T="19" X="55" P="0,0" /><P C="bfb51e" Y="385" T="19" P="0,0" X="175" /><P C="bfb51e" Y="385" T="19" X="295" P="0,0" /><P C="bfb51e" Y="385" T="19" P="0,0" X="415" /><P C="bfb51e" Y="385" T="19" X="535" P="0,0" /><P X="1027" Y="277" T="1" P="0,0" /><P X="1230" Y="269" T="0" P="1,0" /><P X="774" Y="380" T="4" P="0,0" /><P X="1216" Y="121" T="5" P="0,0" /><P X="904" Y="145" T="3" P="0,0" /><P X="825" Y="148" T="7" P="1,0" /><P C="48230c" Y="278" T="20" X="1239" P="0,0" /><P X="1380" Y="122" T="12" P="0,0" /><P X="1436" Y="121" T="12" P="1,1" /><P X="1685" Y="121" T="13" P="1,0" /><P P="0,0" Y="121" T="13" X="1725" /><P X="1765" Y="121" T="13" P="0,0" /><P P="1,0" Y="121" T="13" X="1805" /><P X="1845" Y="121" T="13" P="0,0" /><P P="0,0" Y="121" T="13" X="1885" /><P X="1478" Y="120" T="2" P="0,0" /><P X="1623" Y="118" T="6" P="1,1" /><P X="1132" Y="43" T="43" P="0,0" /><P X="708" Y="274" T="110" P="1,0" /><P P="1,1" Y="122" T="106" X="1251" /><P P="1,0" C="3c5669,32525c" Y="270" T="103" X="1518" /><P P="1,1" Y="290" T="59" X="1153" /><P P="1,0" Y="290" T="59" X="1392" /><P P="1,1" Y="290" T="59" X="1645" /><P P="1,1" Y="146" T="115" X="731" /></D><O /></Z></C>'},
	[3] = {"Bolodefchoco","Romantic Land",'<C><P F="6" L="4800" defilante="0,0,0,1" DS="m;55,315,175,315,295,315,415,315,535,315" /><Z><S><S L="20" o="1d1d1d" H="400" X="10" Y="200" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="700" o="1d1d1d" X="350" H="20" Y="10" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S P="0,0,0.3,0.2,0,0,0,0" L="1400" o="1d1d1d" H="20" Y="390" T="12" X="700" /><S L="20" o="1d1d1d" X="700" H="300" Y="150" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S L="800" H="20" X="1800" Y="390" T="9" P="0,0,,,,0,0,0" /><S L="80" H="40" X="1800" Y="337" T="10" P="0,0,0.8,0,0,0,0,0" /><S L="803" H="10" X="1797" Y="405" T="7" P="0,0,0.1,0.2,0,0,0,0" /><S H="50" L="120" X="2235" c="4" Y="380" T="10" P="0,0,0.3,0,-40,0,0,0" /><S X="2329" L="120" H="50" c="4" N="" Y="314" T="10" P="0,0,0.3,0,-30,0,0,0" /><S H="50" L="120" X="2434" c="4" Y="265" T="10" P="0,0,0.3,0,-20,0,0,0" /><S X="2544" L="120" H="50" c="4" N="" Y="236" T="10" P="0,0,0.3,0,-10,0,0,0" /><S H="50" L="120" X="2658" c="4" Y="226" T="10" P="0,0,0.3,0,0,0,0,0" /><S X="2772" L="120" H="50" c="4" N="" Y="236" T="10" P="0,0,0.3,0,10,0,0,0" /><S H="50" L="120" X="2884" c="4" Y="266" T="10" P="0,0,0.3,0,20,0,0,0" /><S X="2988" L="120" H="50" c="4" N="" Y="315" T="10" P="0,0,0.3,0,30,0,0,0" /><S H="50" L="120" X="3081" c="4" Y="381" T="10" P="0,0,0.3,0,40,0,0,0" /><S P="0,0,0.3,0,-40,0,0,0" L="120" H="50" c="3" Y="405" T="14" X="2237" /><S X="2330" L="120" H="50" c="3" Y="340" T="14" P="0,0,0.3,0,-30,0,0,0" /><S P="0,0,0.3,0,-20,0,0,0" L="120" X="2434" c="3" Y="291" T="14" H="50" /><S H="50" L="120" X="2544" c="3" Y="261" T="14" P="0,0,0.3,0,-10,0,0,0" /><S P="0,0,0.3,0,0,0,0,0" L="120" H="50" c="3" Y="251" T="14" X="2658" /><S X="2773" L="120" H="50" c="3" Y="262" T="14" P="0,0,0.3,0,10,0,0,0" /><S P="0,0,0.3,0,20,0,0,0" L="120" X="2883" c="3" Y="292" T="14" H="50" /><S H="50" L="120" X="2988" c="3" Y="341" T="14" P="0,0,0.3,0,30,0,0,0" /><S P="0,0,0.3,0,40,0,0,0" L="120" H="50" c="3" Y="407" T="14" X="3083" /><S L="840" X="3510" H="34" Y="393" T="11" P="0,0,0.05,0.1,0,0,0,0" /><S L="870" o="ddce97" H="25" X="4365" Y="389" T="12" P="0,0,0.3,0.2,0,0,0,0" /><S P="0,0,0.3,0,10,0,0,0" L="120" H="10" c="3" Y="350" T="14" X="4596" /><S X="4636" L="120" H="10" c="3" Y="350" T="14" P="0,0,0.3,0,-10,0,0,0" /><S X="4155" L="80" H="10" c="3" Y="291" T="14" P="0,0,1,0,90,0,0,0" /><S P="0,0,0.3,0.2,0,0,0,0" L="230" o="ddce97" X="4315" Y="244" T="12" H="15" /></S><D><P C="ddce97" Y="385" T="19" P="0,0" X="55" /><P C="ddce97" Y="385" T="19" X="175" P="0,0" /><P C="ddce97" Y="385" T="19" P="0,0" X="295" /><P C="ddce97" Y="385" T="19" X="415" P="0,0" /><P C="ddce97" Y="385" T="19" P="0,0" X="535" /><P P="0,0" Y="385" T="106" X="1328" /><P X="1368" Y="385" T="106" P="0,1" /><P P="0,0" Y="384" T="106" X="1348" /><P P="0,1" Y="369" T="106" X="1339" /><P X="1360" Y="372" T="106" P="0,0" /><P P="1,0" Y="357" T="106" X="1350" /><P X="935" Y="384" T="84" P="0,0" /><P P="0,0" Y="379" T="83" X="985" /><P P="1,0" Y="383" T="84" X="1113" /><P C="858339" Y="379" T="86" P="1,0" X="1023" /><P P="1,1" Y="318" T="4" X="1801" /><P P="1,0" Y="409" T="80" X="1618" /><P C="8e824b" Y="400" T="85" P="1,0" X="1980" /><P C="a36b54,23130c" Y="225" T="103" P="1,1" X="2647" /><P P="1,0" Y="377" T="13" X="3083" /><P P="1,0" Y="274" T="115" X="2430" /><P P="1,0" Y="378" T="75" X="3327" /><P P="0,0" Y="377" T="68" X="3627" /><P P="0,0" Y="377" T="67" X="3598" /><P X="3657" Y="377" T="67" P="0,1" /><P P="1,0" Y="374" T="66" X="3627" /><P P="1,0" Y="376" T="69" X="3808" /><P P="1,0" Y="377" T="1" X="4154" /><P P="1,0" Y="376" T="6" X="4704" /><P P="1,1" Y="376" T="6" X="4528" /><P P="0,0" Y="361" T="108" X="4607" /><P P="0,0" Y="363" T="108" X="4609" /><P P="0,0" Y="363" T="108" X="4618" /><P P="0,0" Y="363" T="108" X="4629" /><P C="954791,23130c" Y="236" T="103" X="4408" P="1,0" /><P X="4373" Y="236" T="22" P="0,0" /><P X="4321" Y="238" T="33" P="1,0" /><P X="4400" Y="346" T="113" P="0,0" /><P X="4299" Y="352" T="78" P="0,0" /><P P="0,0" Y="375" T="79" X="4322" /><P C="7c5c4f" Y="387" T="104" X="4340" P="0,0" /><P X="4769" Y="378" T="12" P="1,0" /></D><O /></Z></C>'},
}
system.xml = table.random(system.maps)
tfm.exec.newGame(system.xml[3])
